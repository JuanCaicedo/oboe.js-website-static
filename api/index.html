<!DOCTYPE html>
<html>
    <head>

       <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

       <meta name="description" content="A streaming approach to JSON. Oboe.js is a Javascript library for Node.js and browsers that speeds up web applications by providing parsed objects before the response completes"/>

       <meta name="keywords" content="json streaming node.js browsers"/>

        <link rel="stylesheet" href="css/all.css">

        <title>API : Oboe.js</title>

       <link rel="icon" type="image/png" href="favicons/favicon-32.png" sizes="32x32">
       <link rel="icon" type="image/png" href="favicons/favicon-16.png" sizes="16x16">

    </head>
    <body >
        <div id="header">
        </div>
        <nav id="siteNav">
            <svg width="24" height="24" class="menuButton" >
                <rect class="background" width="24" height="24" />
                <rect class="rung" width="16" height="4" x="4" y="3"  />
                <rect class="rung" width="16"  height="4" x="4" y="10"  />
                <rect class="rung" width="16" height="4" x="4" y="17" />
            </svg>
           <ul>
              
              
                  <li class="reducedLogo"><a href="http://www.juancaicedo.com/oboe.js-website//">Oboe.js</a></li>
              

              
                  <li>
                     
                         <a class="siteLink" href="http://www.juancaicedo.com/oboe.js-website//why">Why Oboe.js?</a>
                     
                  </li>

              
                  <li>
                     
                         <a class="siteLink" href="http://www.juancaicedo.com/oboe.js-website//examples">Examples</a>
                     
                  </li>

              
                  <li>
                     
                         <a class="siteLink" href="http://www.juancaicedo.com/oboe.js-website//api">API</a>
                     
                  </li>

              
                  <li>
                     
                         <a class="siteLink" href="http://www.juancaicedo.com/oboe.js-website//download">Download</a>
                     
                  </li>

              
                  <li>
                     
                         <a class="siteLink" href="http://www.juancaicedo.com/oboe.js-website//discuss">Discuss</a>
                     
                  </li>

              
           </ul>
        </nav>
        <div id="pagearea">
           <header class="row">
              
              
                  <h1><a href="http://www.juancaicedo.com/oboe.js-website//">Oboe.js</a></h1>
              

              
           </header>

           <div class="row">

              <nav class="col col1">

                 

                 
                    
                       <div class="internalNav">
                          <h2>API</h2>
                          
                             <ul class="sections">
                                
                                   <li><a href="#the-oboe-function">The oboe function</a></li>
                                
                                   <li><a href="#cross-domain-requests">Cross-domain requests</a></li>
                                
                                   <li><a href="#byo-stream">BYO stream</a></li>
                                
                                   <li><a href="#node-event">node event</a></li>
                                
                                   <li><a href="#transforming-the-json">transforming the JSON</a></li>
                                
                                   <li><a href="#oboe-drop">oboe.drop</a></li>
                                
                                   <li><a href="#path-event">path event</a></li>
                                
                                   <li><a href="#done-event">done event</a></li>
                                
                                   <li><a href="#start-event">start event</a></li>
                                
                                   <li><a href="#fail-event">fail event</a></li>
                                
                                   <li><a href="#-source">.source</a></li>
                                
                                   <li><a href="#-header-name-">.header([name])</a></li>
                                
                                   <li><a href="#-root-">.root()</a></li>
                                
                                   <li><a href="#-forget-">.forget()</a></li>
                                
                                   <li><a href="#-removelistener-">.removeListener()</a></li>
                                
                                   <li><a href="#-abort-">.abort()</a></li>
                                
                                   <li><a href="#pattern-matching">Pattern matching</a></li>
                                
                                   <li><a href="#browser-support">Browser support</a></li>
                                
                             </ul>
                          
                       </div>
                    
                 

                 
              </nav>
              <div class="col col2">

                 <main class="marked">
                   
<h2 id="the-oboe-function">The oboe function</h2>
<p>Oboe.js exposes only one function, <code>oboe</code>, which is used to instantiate a new Oboe instance.
Calling this function starts a new HTTP request unless the caller is
<a href="#byo-stream">managing the stream themselves</a>.</p>
<pre><code class="undefinedjs">oboe( String url )

oboe({
   url: String,
   method: String,          <span class="comment">// optional</span>
   headers: Object,         <span class="comment">// optional</span>
   body: String|Object,     <span class="comment">// optional</span>
   cached: Boolean,         <span class="comment">// optional</span>
   withCredentials: Boolean <span class="comment">// optional, browser only</span>
})</code></pre>
<pre><code class="undefinedjs"><span class="comment">// the doMethod style of calling is deprecated</span>
<span class="comment">// and will be removed in v2.0.0:</span>
oboe.doGet(    url )
oboe.doDelete( url )
oboe.doPost(   url, body )
oboe.doPut(    url, body )
oboe.doPatch(  url, body )

oboe.doGet(    {url:String, headers:Object, cached:Boolean} )
oboe.doDelete( {url:String, headers:Object, cached:Boolean} )
oboe.doPost(   {url:String, headers:Object, cached:Boolean, body:String|Object} )
oboe.doPut(    {url:String, headers:Object, cached:Boolean, body:String|Object} )
oboe.doPatch(  {url:String, headers:Object, cached:Boolean, body:String|Object} )</code></pre>
<p>The <code>method</code>, <code>headers</code>, <code>body</code>, <code>cached</code>, and <code>withCredentials</code> arguments are optional.</p>
<ul>
<li>If <code>method</code> is not given Oboe defaults to <code>GET</code>.</li>
<li>If <code>body</code> is given as an object it will be stringified using <code>JSON.stringify</code>
prior to sending. The Content-Type request header will automatically be set to <code>text/json</code>
unless a different value is explicitly given.</li>
<li>If the cached option is given as <code>false</code> cachebusting will be applied by
appending <code>_={timestamp}</code> to the URL&#39;s query string. Any other value will be
ignored.</li>
</ul>
<h2 id="cross-domain-requests">Cross-domain requests</h2>
<p>Oboe.js is able to make cross-domain requests so long as the server
is set up for <abbr title="Cross-site HTTP requests">CORS</abbr>, for example by setting the
<a href="http://developer.mozilla.org/en/docs/HTTP/Access_control_CORS#Access-Control-Allow-Origin">Access-Control-Allow-Origin</a>
response header.</p>
<ul>
<li>If <code>withCredentials</code> is given as <code>true</code>, cookies and other auth will be propagated to
cross-domain requests as per the <a href="http://www.w3.org/TR/2014/WD-XMLHttpRequest-20140130/#the-withcredentials-attribute">XHR spec</a>.
For this to work the server must be set up to send the
<a href="http://developer.mozilla.org/en/docs/HTTP/Access_control_CORS#Access-Control-Allow-Credentials">Access-Control-Allow-Credentials</a>
response header.</li>
</ul>
<p>Note that <a href="http://enable-cors.org/client.html">Internet Explorer only fully supports CORS from version 10 onwards</a>.</p>
<p>When making requests from Node the <code>withCredentials</code> option is never needed and is ignored.
<a href="https://www.npmjs.org/package/cors">The cors middleware</a> might be useful if you are
serving cross-domain requests from Express/Connect.</p>
<h2 id="byo-stream">BYO stream</h2>
<p>Under Node.js you may also pass <code>oboe</code> an arbitrary
<a href="http://nodejs.org/api/stream.html#stream_class_stream_readable">ReadableStream</a>
for it to read JSON from.
It is your responsibility to initiate the stream and Oboe will not start
a new HTTP request on your behalf.</p>
<pre><code class="undefinedjs">oboe( stream )   <span class="comment">// Node.js only</span></code></pre>
<h2 id="node-event">node event</h2>
<p>The methods <code>.node()</code> and <code>.on()</code> are used to register interest in particular nodes by providing
JSONPath patterns. As the JSON stream is parsed the Oboe instance checks for matches
against these patterns and when a matching node is found it emits a <code>node</code> event.</p>
<pre><code class="undefinedjs">.on(<span class="string">'node'</span>, pattern, callback)

<span class="comment">// 2-argument style .on() ala Node.js EventEmitter#on</span>
.on(<span class="string">'node:{pattern}'</span>, callback)

.node(pattern, callback)

<span class="comment">// register several listeners at once</span>
.node({
   pattern1 : callback1,
   pattern2 : callback2
});</code></pre>
<p>When the callback is notified, the context, <code>this</code>, is the Oboe instance,
unless it is bound otherwise. The callback receives three parameters:</p>
<p>|             |              |
|-------------|--------------|
| <code>node</code>      | The node that was found in the JSON stream. This can be any valid JSON type - <code>Array</code>, <code>Object</code>, <code>String</code>, <code>Boolean</code> or <code>null</code>
| <code>path</code>      | An array of strings describing the path from the root of the JSON to the matching item. For example, if the match is at <code>(root).foo.bar</code> this array will equal <code>[&#39;foo&#39;, &#39;bar&#39;]</code>. <a href="examples#taking-meaning-from-a-node-s-location">Example usage</a>.
| <code>ancestors</code> | An array of the found item&#39;s ancestors such that <code>ancestors[0]</code> is the JSON root, <code>ancestors[ancestors.length-1]</code> is the parent object, and <code>ancestors[ancestors.length-2]</code> is the grandparent. These ancestors will be as complete as possible given the data which has so far been read from the stream but because Oboe.js is a streaming parser they may not yet have all properties</p>
<pre><code class="undefinedjs">oboe(<span class="string">'friends.json'</span>)
   .node(<span class="string">'name'</span>, <span class="keyword">function</span>(name){
      console.log(<span class="string">'You have a friend called'</span>, name);
   });</code></pre>
<h2 id="transforming-the-json">transforming the JSON</h2>
<p>If the callback returns any value, the returned value will be used to replace the parsed JSON node.</p>
<p>See <a href="examples#demarshalling-json-to-an-oop-model">demarshalling to an OOP model</a>
and <a href="examples#transforming-json-while-it-is-streaming">Transforming JSON while it is streaming</a>.</p>
<pre><code class="undefinedjs"><span class="comment">// Replace any object with a name, date of birth, and address</span>
<span class="comment">// in the JSON with a Person instance</span>

.on(<span class="string">'node'</span>, <span class="string">'{name dob address}'</span>, <span class="keyword">function</span>(personJson){
   <span class="keyword">return</span> <span class="keyword">new</span> Person(personJson.name, personJson.dob, personJson.address);
})</code></pre>
<h2 id="oboe-drop">oboe.drop</h2>
<p>If a node listener returns the special value <code>oboe.drop</code>, the detected node is dropped entirely
from the tree.</p>
<p>This can be used to ignore fields that you don&#39;t care about,
or to <a href="">load large JSON without running out of memory</a>.</p>
<pre><code class="undefinedjs">.on(<span class="string">'node'</span>, <span class="string">'person.address'</span>, <span class="keyword">function</span>(address){
   console.log(<span class="string">"I don't care what's at"</span>, address);
   <span class="keyword">return</span> oboe.drop;
})</code></pre>
<p><code>oboe.drop</code> can also be used in a shorthand form:</p>
<pre><code class="undefinedjs">.on(<span class="string">'node'</span>, <span class="string">'person.address'</span>, oboe.drop)</code></pre>
<p>Dropping from an <em>array</em> will result in
<a href="http://speakingjs.com/es5/ch18.html#_arrays_are_maps_not_tuples">an array with holes in it</a>.
This is intentional so that the array indices from the original JSON are preserved:</p>
<pre><code class="undefinedjs"><span class="comment">// json from service is an array of names:</span>
[<span class="string">'john'</span>, <span class="string">'wendy'</span>, <span class="string">'frank'</span>, <span class="string">'victoria'</span>, <span class="string">'harry'</span>]

oboe(<span class="string">'names.json'</span>)
   .on(<span class="string">'2'</span>, oboe.drop)
   .done(console.log)

<span class="comment">// this logs:</span>
<span class="comment">//    ['john', 'wendy', , 'victoria', 'harry']</span>
<span class="comment">//    note the array hole</span></code></pre>
<p>Meanwhile, dropping from an <em>object</em> leaves no trace of the key/value pair:</p>
<pre><code class="undefinedjs"><span class="comment">// json from service is a hash from names to numbers:</span>
{<span class="string">'john'</span>:<span class="number">4</span>, <span class="string">'wendy'</span>: <span class="number">2</span>, <span class="string">'frank'</span>: <span class="number">0</span>, <span class="string">'victoria'</span>: <span class="number">9</span>, <span class="string">'harry'</span>: <span class="number">2</span>}

oboe(<span class="string">'gameScores.json'</span>)
   .on(<span class="string">'wendy'</span>, oboe.drop)
   .done(console.log)

<span class="comment">// this logs:</span>
<span class="comment">//    {'john':4, 'frank': 0, 'victoria': 9, 'harry': 2}</span></code></pre>
<h2 id="path-event">path event</h2>
<p>Path events are identical to <a href="#node-event">node events</a> except that they are emitted as soon as matching paths are found,
without waiting for the thing at the path to be revealed.</p>
<pre><code class="undefinedjs">.on(<span class="string">'path'</span>, pattern, callback)

<span class="comment">// 2-argument style .on() ala Node.js EventEmitter#on</span>
.on(<span class="string">'path:{pattern}'</span>, callback)

.path(pattern, callback)

<span class="comment">// register several listeners at once</span>
.path({
   pattern1 : callback1,
   pattern2 : callback2
});</code></pre>
<pre><code class="undefinedjs">oboe(<span class="string">'friends.json'</span>)
   .path(<span class="string">'friend'</span>, <span class="keyword">function</span>(name){
      friendCount++;
   });</code></pre>
<p>One use of path events is to <a href="examples#reacting-before-we-get-the-whole-object">start adding elements to an interface before they are complete</a>.</p>
<h2 id="done-event">done event</h2>
<pre><code class="undefinedjs">.done(callback)

.on(<span class="string">'done'</span>, callback)</code></pre>
<p>Done events are fired when the response is complete. The callback is passed the entire
parsed JSON.</p>
<p>In most cases it is faster to read the JSON in small parts by listening to <code>node</code> events
(see <a href="#node-event">above</a>) than waiting for it to be completely download.</p>
<pre><code class="undefinedjs">oboe(<span class="string">'resource.json'</span>)
   .on(<span class="string">'done'</span>, <span class="keyword">function</span>(parsedJson){
      console.log(<span class="string">'Request complete'</span>, parsedJson);
   });</code></pre>
<h2 id="start-event">start event</h2>
<pre><code class="undefinedjs">.start(callback)

.on(<span class="string">'start'</span>, callback)</code></pre>
<p>Start events are fired when Oboe
has parsed the status code and the response headers but has not yet received any content
from the response body.</p>
<p>The callback receives two parameters:</p>
<p>| name        | type     |
|-------------|----------|------------------------
| <code>status</code>    | <code>Number</code> | HTTP status code
| <code>headers</code>   | <code>Object</code> | Object of response headers</p>
<pre><code class="undefinedjs">oboe(<span class="string">'resource.json'</span>)
   .on(<span class="string">'start'</span>, <span class="keyword">function</span>(status, headers){
      console.log(<span class="string">'Resource cached for'</span>, headers.Age, <span class="string">'secs'</span>);
   });</code></pre>
<p>Under Node.js this event is never fired for <a href="#byo-stream">BYO streaming</a>.</p>
<h2 id="fail-event">fail event</h2>
<pre><code class="undefinedjs">   .fail(callback)

   .on(<span class="string">'fail'</span>, callback)</code></pre>
<p>Fetching a resource could fail for several reasons:</p>
<ul>
<li>Non-2xx status code</li>
<li>Connection lost</li>
<li>Invalid JSON from the server</li>
<li>Error thrown by an event listener</li>
</ul>
<p>The fail callback receives an object with four fields:</p>
<p>| Field        | Meaning
|--------------|---------------------------------------------------------
| <code>thrown</code>     | The error, if one was thrown
| <code>statusCode</code> | The status code, if the request got that far
| <code>body</code>       | The response body for the error, if any
| <code>jsonBody</code>   | If the server&#39;s error response was JSON, the parsed body</p>
<pre><code class="undefinedjs">oboe(<span class="string">'/content'</span>)
   .fail( <span class="keyword">function</span>( errorReport ){
      <span class="keyword">if</span>( <span class="number">404</span> == errorReport.statusCode ){
         console.error(<span class="string">'no such content'</span>);
      }
   });</code></pre>
<h2 id="-source">.source</h2>
<p><em>Since v.1.15.0</em></p>
<p>Gives the URL (or <a href="#byo-stream">stream</a>) that the Oboe instance
is fetching from. This is sometimes useful if one handler is being used
for several streams.</p>
<pre><code class="undefinedjs">oboe(<span class="string">'http://example.com/names.json'</span>)
   .node(<span class="string">'name'</span>, handleName);

oboe(<span class="string">'http://example.com/more_names.json'</span>)
   .node(<span class="string">'name'</span>, handleName);

<span class="function"><span class="keyword">function</span> <span class="title">handleName</span><span class="params">(name)</span>{</span>
   console.log(<span class="string">'got name'</span>, name, <span class="string">'from'</span>, <span class="keyword">this</span>.source);
}</code></pre>
<h2 id="-header-name-">.header([name])</h2>
<pre><code class="undefinedjs">.header()

.header(name)</code></pre>
<p><code>.header()</code> returns one or more HTTP response headers.
If the name parameter is given that named header will be returned as a String,
otherwise all headers are returned as an Object.</p>
<p><code>undefined</code> wil be returned if the headers have not yet been received. The headers
are available anytime after the <code>start</code> event has been emitted. They will always be
available from inside a <code>node</code>, <code>path</code>, <code>start</code> or <code>done</code> callback.</p>
<p><code>.header()</code> always returns undefined for non-HTTP streams.</p>
<pre><code class="undefinedjs">oboe(<span class="string">'data.json'</span>)
   .node(<span class="string">'id'</span>, <span class="keyword">function</span>(id){
      console.log(   <span class="string">'Server has id'</span>, id,
                     <span class="string">'as of'</span>, <span class="keyword">this</span>.headers(<span class="string">'Date'</span>));
   });</code></pre>
<h2 id="-root-">.root()</h2>
<p>At any time, call <code>.root()</code> on the oboe instance to get the JSON parsed so far.
If nothing has yet been received this will return <code>undefined</code>.</p>
<pre><code class="undefinedjs"><span class="keyword">var</span> interval;

oboe(<span class="string">'resourceUrl'</span>)
   .start(<span class="keyword">function</span>(){
      interval = window.setInterval(<span class="keyword">function</span>(){
         console.log(<span class="string">'downloaded so far:'</span>, <span class="keyword">this</span>.root());
      }.bind(<span class="keyword">this</span>), <span class="number">10</span>);
   })
   .done(<span class="keyword">function</span>(completeJson){
      console.log(<span class="string">'download finished:'</span>, completeJson);
      window.clearInterval(interval);
   });</code></pre>
<h2 id="-forget-">.forget()</h2>
<pre><code class="undefinedjs">.node(<span class="string">'*'</span>, <span class="keyword">function</span>(){
   <span class="keyword">this</span>.forget();
})</code></pre>
<p><code>.forget()</code> is a shortcut for <a href="#-removelistener-">.removeListener()</a> in
the case where the listener to be removed is currently executing.
Calling <code>.forget()</code> on the Oboe instance from inside a <code>node</code> or <code>path</code>
callback de-registers that callback.</p>
<pre><code class="undefinedjs"><span class="comment">// Display only the first ten downloaded items</span>
<span class="comment">// but place all in the model</span>

oboe(<span class="string">'/content'</span>)
   .node(<span class="string">'!.*'</span>, <span class="keyword">function</span>(item, path){
      <span class="keyword">if</span>( path[<span class="number">0</span>] == <span class="number">9</span> )
         <span class="keyword">this</span>.forget();

      displayItem(item);
   })
   .node(<span class="string">'!.*'</span>, <span class="keyword">function</span>(item){
      addToModel(item);
   });</code></pre>
<h2 id="-removelistener-">.removeListener()</h2>
<pre><code class="undefinedjs">.removeListener(<span class="string">'node'</span>, pattern, callback)
.removeListener(<span class="string">'node:{pattern}'</span>, pattern, callback)

.removeListener(<span class="string">'path'</span>, pattern, callback)
.removeListener(<span class="string">'path:{pattern}'</span>, pattern, callback)

.removeListener(<span class="string">'start'</span>, callback)
.removeListener(<span class="string">'done'</span>, callback)
.removeListener(<span class="string">'fail'</span>, callback)</code></pre>
<p>Remove any listener on the Oboe instance.</p>
<p>From inside node and path callbacks <a href="#-forget-">.forget()</a>
is usually more convenient because it does not require that the programmer stores a reference
to the callback function. However, <code>.removeListener()</code>
has the advantage that it may be called from anywhere.</p>
<h2 id="-abort-">.abort()</h2>
<p>Calling <code>.abort()</code> stops an ongoing HTTP call at any time.
You are guaranteed not to get any further <code>path</code> or <code>node</code>
callbacks, even if the underlying transport has unparsed buffered content.
After calling <code>.abort()</code> the <code>done</code> event will not fire.</p>
<p>Under Node.js, if the Oboe instance is reading from a stream that it did not create
this method deregisters all listeners but it is the caller&#39;s responsibility to
actually terminate the streaming.</p>
<pre><code class="undefinedjs"><span class="comment">// Display the first nine nodes, then hang up</span>
oboe(<span class="string">'/content'</span>)
   .node(<span class="string">'!.*'</span>, <span class="keyword">function</span>(item){
      display(item);
   })
   .node(<span class="string">'![9]'</span>, <span class="keyword">function</span>(){
      <span class="keyword">this</span>.abort();
   });</code></pre>
<h2 id="pattern-matching">Pattern matching</h2>
<p>Oboe&#39;s pattern matching is a variation on <a href="https://code.google.com/p/json-path/">JSONPath</a>. It supports these clauses:</p>
<p>| Clause         | Meaning             |
|----------------|---------------------|
| <code>!</code>            | Root object
| <code>.</code>            | Path separator
| <code>person</code>       | An element under the key &#39;person&#39;
| <code>{name email}</code> | An element with attributes name and email
| <code>*</code>            | Any element at any name
| <code>[2]</code>          | The second element (of an array)
| <code>[&#39;foo&#39;]</code>      | Equivalent to .foo
| <code>[*]</code>          | Equivalent to .*
| <code>..</code>           | Any number of intermediate nodes (non-greedy)
| <code><math title="&lt;/code&gt; | Explicitly specify an intermediate clause in the jsonpath spec the callback should be applied to&lt;/p&gt; &lt;p&gt;The pattern engine supports &lt;a href="></math>CSS-4 style node selection using the dollar, <code>"><mfrac><mo>&lt;</mo><mi>c</mi></mfrac><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo><mrow><mo>&#8739;</mo></mrow><mi>E</mi><mi>x</mi><mi>p</mi><mi>l</mi><mi>i</mi><mi>c</mi><mi>i</mi><mi>t</mi><mi>l</mi><mi>y</mi><mi>s</mi><mi>p</mi><mi>e</mi><mi>c</mi><mrow><mspace width="1ex"></mspace><mo>if</mo><mspace width="1ex"></mspace></mrow><mi>y</mi><mi>a</mi><mi>n</mi><mo>&int;</mo><mi>e</mi><mi>r</mi><mi>m</mi><mi>e</mi><mi>d</mi><mi>i</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>u</mi><mi>s</mi><mi>e</mi><mo>&isin;</mo><mi>t</mi><mi>h</mi><mi>e</mi><mi>j</mi><mi>s</mi><mi>o</mi><mi>n</mi><mi>p</mi><mi>a</mi><mi>t</mi><mi>h</mi><mi>s</mi><mi>p</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>c</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>b</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>s</mi><mi>h</mi><mi>o</mi><munder><mi>d</mi><mo>&#818;</mo></munder><mi>b</mi><mi>e</mi><mi>a</mi><mi>p</mi><mi>p</mi><mi>l</mi><mi>i</mi><mi>e</mi><mi>d</mi><mo>&rarr;</mo><mfrac><mo>&lt;</mo><mi>p</mi></mfrac><mo>&gt;</mo><mo>&lt;</mo><mi>p</mi><mo>&gt;</mo><mi>T</mi><mi>h</mi><mi>e</mi><mi>p</mi><mi>a</mi><mstyle fontfamily="monospace"><mi>e</mi></mstyle><mi>r</mi><mi>n</mi><mi>e</mi><mi>n</mi><mrow><mi>g</mi><mo>&isin;</mo></mrow><mi>e</mi><mo>&sup;</mo><mi>p</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>t</mi><mi>s</mi><mo>&lt;</mo><mi>a</mi><mi>h</mi><mi>r</mi><mi>e</mi><mrow><mi>f</mi><mo>=</mo></mrow><mrow><mtext></mtext></mrow><mi>e</mi><mi>x</mi><mi>a</mi><mi>m</mi><mi>p</mi><mo>&le;</mo><mfrac><mi>s</mi><mo>#</mo></mfrac><mi>c</mi><mi>s</mi><mi>s</mi><mn>4</mn><mo>-</mo><mi>s</mi><mi>t</mi><mi>y</mi><mo>&le;</mo><mo>-</mo><mi>p</mi><mi>a</mi><mstyle fontfamily="monospace"><mi>e</mi></mstyle><mi>r</mi><mi>n</mi><mi>s</mi><mrow><mtext></mtext></mrow><mi>C</mi><mi>S</mi><mi>S</mi><mo>-</mo><mn>4</mn><mi>s</mi><mi>t</mi><mi>y</mi><mo>&le;</mo><mi>n</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>s</mi><mi>e</mi><mo>&le;</mo><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>a</mi></mfrac><mo>&gt;</mo><mi>u</mi><mrow><mo>sin</mo><mrow><mi>g</mi><mi>t</mi></mrow></mrow><mi>h</mi><mi>e</mi><mi>d</mi><mi>o</mi><mi>l</mi><mi>l</mi><mi>a</mi><mi>r</mi><mo>,</mo><mo>&lt;</mo><mi>c</mi><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo></code>, symbol. See also <a href="/examples/#example-patterns">the example patterns</a>.</code></p>
<h2 id="browser-support">Browser support</h2>
<p>These browsers have full support:</p>
<ul>
<li>Recent Chrome</li>
<li>Recent Firefox</li>
<li>Recent Safari</li>
<li>Internet Explorer 10</li>
</ul>
<p>These browsers will run Oboe but not stream:</p>
<ul>
<li>Internet explorer 8 and 9, given <a href="https://github.com/kriskowal/es5-shim/blob/master/es5-sham.js">appropriate shims for ECMAScript 5</a></li>
</ul>
<p>Unfortunately, <abbr title="Internet Explorer">IE</abbr> before version 10
<a href="http://blogs.msdn.com/b/ieinternals/archive/2010/04/06/comet-streaming-in-internet-explorer-with-xmlhttprequest-and-xdomainrequest.aspx">doesn&#39;t provide any convenient way to read an http request while it is in progress</a>.
It may be possible to add support for limited streaming in Internet Explorer 8 and 9 using the proprietary
<a href="http://msdn.microsoft.com/en-us/library/cc288060%28VS.85%29.aspx">XDomainRequest</a>
but this object is has a reduced API and is buggy -
<a href="http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx">only GET and POST are supported and it does not allow HTTP headers to be set</a>.
It also requires that responses set the <code>Access-Control-Allow-Origin</code>
header and fails in IE8 for users browsing using InPrivate mode.</p>
<p>The good news is that in older versions of IE Oboe gracefully degrades.
It falls back to waiting for the whole response to return, then fires
all the events instantaneously.
You don&#39;t get streaming but the responsiveness is no worse than if you
had used a non-streaming AJAX download.</p>

                   <h2 id="improve-this-page">Improve this page</h2>
<p>Is this page clear enough? Typo-free? Could you improve it?</p>
<p>Please fork the <a href="https://github.com/jimhigson/oboe.js-website">Oboe.js
  website repo</a> and make a pull
  request. The markdown source is
  <a href="https://github.com/jimhigson/oboe.js-website/blob/master/content/.md">here</a>.</p>


                 </main>

              </div>

           </div>
        </div>
        <footer>
           <div id="footer-contents">
              <a class="contact" href="mailto:jim.higson@gmail.com">Contact the author</a>

              <span id="externalLinks">
                  <a href="https://twitter.com/OboeJs">
                     <svg width="64" height="64">
                        <path class="logo" d="M 44 6.6 C 37 6.6 31.2 12.4 31.2 19.4 C 31.2 20.4 31.3 21.4 31.5 22.3 C 20.9 21.8 11.4 16.7 5.1 8.9 C 4 10.8 3.4 13.1 3.4 15.4 C 3.4 19.9 5.6 23.8 9.1 26.1 C 7 26 5 25.4 3.3 24.5 C 3.2 24.5 3.3 24.6 3.3 24.6 C 3.3 30.8 7.7 36 13.5 37.2 C 12.5 37.5 11.3 37.7 10.2 37.7 C 9.3 37.7 8.5 37.6 7.8 37.4 C 9.4 42.5 14.1 46.2 19.7 46.3 C 15.3 49.8 9.8 51.8 3.8 51.8 C 2.8 51.8 1.8 51.7 0.8 51.6 C 6.4 55.3 13.2 57.4 20.4 57.4 C 44 57.4 56.9 37.9 56.9 20.9 C 56.9 20.4 56.9 19.8 56.8 19.3 C 59.3 17.4 61.5 15.2 63.3 12.6 C 61 13.6 58.5 14.3 55.9 14.6 C 58.5 13 60.6 10.5 61.5 7.5 C 59.1 9 56.3 10.1 53.4 10.7 C 51 8.2 47.7 6.6 44 6.6 z"/>
                     </svg>
                  </a>

                  <a href="https://github.com/jimhigson/oboe.js">
                     <svg width="64" height="64">
                        <path class="logo" d="M 32,1.3 C 15,1.3 1.3,15 1.3,32 1.3,49 15,62.7 32,62.7 49,62.7 62.7,49 62.7,32 62.7,15 49,1.3 32,1.3 z m 0,4.9 c 3.5,0 6.9,0.7 10,2 3.1,1.3 5.8,3.1 8.2,5.5 2.4,2.4 4.2,5.1 5.5,8.2 1.3,3.2 2,6.5 2,10 0,3.5 -0.7,6.9 -2,10 -1.3,3.1 -3.2,5.8 -5.5,8.2 -2.4,2.4 -5.1,4.2 -8.2,5.5 -0.8,0.3 -1.6,0.6 -2.4,0.9 l 0,-4.6 c 0,-2.4 -0.8,-4.2 -2.5,-5.3 1,-0.1 2,-0.3 2.9,-0.4 0.9,-0.2 1.8,-0.4 2.8,-0.8 1,-0.3 1.9,-0.7 2.6,-1.2 0.8,-0.5 1.5,-1.1 2.2,-1.8 0.7,-0.7 1.3,-1.6 1.8,-2.5 0.5,-0.9 0.8,-2.1 1.1,-3.4 0.3,-1.3 0.4,-2.8 0.4,-4.4 0,-3.1 -1,-5.8 -3,-7.9 C 48.9,21.8 48.7,19.2 47.6,16.3 L 46.9,16.3 c -0.5,-0.1 -1.4,0.2 -2.8,0.7 C 42.7,17.4 41.2,18.2 39.5,19.4 c -2.4,-0.7 -4.8,-1 -7.4,-1 -2.6,0 -5,0.3 -7.4,1 -1.1,-0.7 -2.1,-1.3 -3,-1.8 -0.9,-0.5 -1.7,-0.8 -2.3,-1 -0.6,-0.2 -1.1,-0.3 -1.6,-0.3 -0.5,0 -0.8,-0.1 -0.9,0 -0.1,0 -0.3,0 -0.3,0.1 -1.1,2.8 -1.2,5.4 -0.3,7.8 -2,2.2 -3,4.8 -3,7.9 0,1.6 0.1,3 0.4,4.4 0.3,1.3 0.7,2.5 1.2,3.4 0.5,0.9 1.1,1.8 1.8,2.5 0.7,0.7 1.4,1.4 2.2,1.8 0.8,0.5 1.6,0.8 2.6,1.2 1,0.3 1.9,0.6 2.8,0.8 0.9,0.2 1.8,0.3 2.8,0.4 -1.6,1.1 -2.5,2.9 -2.5,5.3 l 0,4.7 C 23.7,56.4 22.8,56.1 22,55.8 18.9,54.5 16.2,52.6 13.8,50.2 11.4,47.8 9.5,45.1 8.3,42 6.9,38.9 6.2,35.5 6.2,32 6.2,28.5 6.9,25.1 8.3,22 9.5,18.9 11.4,16.1 13.8,13.8 16.2,11.4 18.9,9.5 22,8.3 25.1,6.9 28.5,6.2 32,6.2 z"/>
                     </svg>
                  </a>

                  <a href="https://groups.google.com/forum/#!forum/oboejs">
                     <svg width="64" height="64">
                        <path class="logo" d="M 34.7 4.1 C 29.7 4.1 24.6 4.9 20 7.3 C 18.1 8.3 16.7 9.3 15.4 10.3 C 11.9 12.9 10.1 15.5 8.6 17.6 C 7.1 19.8 5.9 23.2 5.4 24.7 C 4.8 26.5 4.7 28.3 4.5 30.2 C 4.3 31.4 4.3 32.7 4.4 34.1 C 4.5 37.2 5.2 40.6 6.7 43.8 C 7.8 46.1 9.2 48.3 10.7 50.3 C 13 53.6 16.8 55.7 19 56.8 C 20.7 57.7 22.9 58.7 26.6 59.3 C 30.7 60 36.9 60 46.7 58.4 C 49.4 58 52.4 57.1 55.8 56.4 C 56 56.4 56.2 56.3 56.4 56.2 C 56.6 56.2 56.8 56.2 56.8 56.1 C 56.6 51.7 56.7 46.8 56.8 44.6 C 56.8 44.3 56.8 43.2 56.8 42.8 C 56.8 42.4 57 42.5 57.3 42.3 L 59.3 40.3 L 43.3 40 L 37.8 43.2 L 48.8 42.7 L 48.8 55 C 48.8 55 44.4 56.9 38.3 56.8 C 33.9 56.7 28.6 55.7 23.5 51.8 C 15.4 45.7 12.6 37.3 12.5 31.3 C 12.5 28.2 12.4 25.9 12.7 24.9 C 12.9 24 13.2 21.9 14.2 19.7 C 15.4 16.6 17.5 13.3 21.4 10.7 C 23.8 9 27 7.5 30.8 7.2 C 35.1 6.8 38.2 7.3 40.8 8.3 C 47.1 10.8 48.4 12.8 49.3 13.6 C 49.3 13.6 49.5 13.8 49.5 13.9 C 49.4 14 49.4 14.1 49.3 14.2 C 48.9 14.9 47.8 16.8 47.8 16.8 L 50.2 16.6 L 56.6 10.3 C 56.8 10 51.1 6.2 43.1 4.8 C 40.5 4.4 37.6 4.1 34.7 4.1 z"/>
                     </svg>
                  </a>
              </span>

              <a href="//samwakeling.com" id="sw" title="Web design by Sam Wakeling">Web
                 design by Sam Wakeling
              </a>
           </div>
        </footer>

        

        <script type="text/javascript" src="js/app.js"></script>

        <template id="demoCaption">
   <div class="demoCaption narrative">
       <div class="relativePosition">
          <p class="label"></p>
          <a class="dismiss" href="#">Continue</a>
       </div>
   </div>
</template>

<svg id="demoTemplateHolder" xmlns:xlink="http://www.w3.org/1999/xlink">

<template id="demo">
    <svg width="100%" height="200">
        <g class="scaling">
            <g class="barriers"/>
            <g class="wires"/>
            <g class="messages">
               <g class="outers">
               </g>
               <g class="inners">
               </g>
            </g>
            <g class="packets"/>
            <g class="places"/>
            <g class="lightbox narrative">
               <g class="zoom">
                  <path d="M -520 -335 L -520 335 L 520 335 L 520 -335 L -520 -335 z M 0 -75 C 44.18278 -75 80 -41.421356 80 0 C 80 41.421356 44.18278 75 0 75 C -44.18278 75 -80 41.421356 -80 0 C -80 -41.421356 -44.18278 -75 0 -75 z"/>
               </g>
            </g>
            <g class="controls">
                <g class="fadeControls">
                    <rect class="fade" x="0" y="0" width="500" height="200"/>
                    <text class="play" x="250" y="100">Play &#x25B6;</text>
                </g>
                <g class="reset">
                    <ellipse cx="0" xy="0" rx="125" ry="60" class="clickableArea"/>
                    <text x="10" y="-10">Reset</text>
                </g>
            </g>
        </g>
    </svg>
</template>
<template id="tower">
    <g class="tower" transform="scale(0.6) translate(0,6)">
        <path class="area" d="M 0,0 C -14.5,36.2 -28.5,71.8 -43,108 l 12,0 c 8.5,-22.2 19.5,-34.2 31,-40.5 11.5,6.3 22.5,18.3 31,40.5 l 12,0 C 28.5,71.8 14.5,36.2 0,0 z"/>
        <path class="structure" d="M 0,0 C -14.5,36.2 -28.5,71.8 -43,108 l 12,0 c 8.5,-22.2 19.5,-34.2 31,-40.5 11.5,6.3 22.5,18.3 31,40.5 l 12,0 C 28.5,71.8 14.5,36.2 0,0 z m 0,9 4.8,12.4 c -1.8,0.1 -3.4,0.2 -4.8,0.3 -1.4,-0.2 -3.1,-0.3 -4.8,-0.3 z M 0,24.8 c 1.4,0.2 2.7,0.5 3.7,0.9 1.8,0.8 3.3,2.5 4.8,5 l 0,0 c -2.5,0.2 -5.4,0.6 -8.5,1.6 -3.1,-1 -6,-1.4 -8.5,-1.6 1.5,-2.5 2.9,-4.2 4.8,-5 1,-0.4 2.2,-0.7 3.7,-0.9 z m -9.6,8.8 c 1.5,0.1 3.2,0.3 5.1,0.7 -3.1,1.7 -6,4 -8.2,7.3 z m 19.1,0 3.1,7.9 c -2.1,-3.3 -5.1,-5.6 -8.2,-7.3 1.9,-0.4 3.6,-0.6 5.1,-0.7 z M 0,35.5 c 0.4,0.1 0.7,0.3 1.1,0.4 3.8,1.6 7.3,4.2 9.6,8.2 C 6.9,44.3 3.3,44.8 0,45.7 c -3.3,-0.9 -6.9,-1.4 -10.7,-1.5 2.2,-4 5.7,-6.6 9.6,-8.2 0.4,-0.2 0.7,-0.3 1.1,-0.4 z m -11.9,11.6 c 2.3,0 4.6,0.2 6.7,0.5 -0.2,0.1 -0.4,0.2 -0.5,0.3 -3.9,2 -7.3,4.9 -9.8,8.7 z m 23.8,0 3.6,9.4 C 13,52.8 9.7,49.9 5.8,47.9 c -0.2,-0.1 -0.4,-0.2 -0.5,-0.3 2.1,-0.3 4.3,-0.5 6.7,-0.5 z M 0,48.9 c 1.5,0.5 3,1 4.4,1.7 4.1,2.1 7.4,5.2 9.7,9.5 -4.5,0.3 -9.2,1.4 -14,3.4 -4.8,-2 -9.5,-3.1 -14.1,-3.4 2.3,-4.3 5.5,-7.4 9.7,-9.5 1.4,-0.7 2.8,-1.2 4.4,-1.7 z m -15.3,14.2 c 0.1,0 0.2,0 0.3,0 0,0 0.1,0 0.1,0 3.5,0.2 7.1,1 10.7,2.5 -6.1,3.3 -12.1,8 -17.7,14.7 z m 30.2,0 c 0.1,0 0.2,0 0.3,0 l 6.5,17 c -5.5,-6.6 -11.5,-11.3 -17.5,-14.5 3.6,-1.4 7.2,-2.2 10.7,-2.4 z"/>
    </g>
</template>
<template id="wire-cable">
    <line class="wire cable"/>
</template>
<template id="wire-mobile">
    <g class="wire mobile">
        <circle class="aerial upstream" r="10"/>
        <circle class="aerial downstream" r="10"/>
    </g>
</template>
<template id="message">
    <line class="messageOuter"/>
    <line class="messageInner"/>
</template>
<template id="server">
    <g class="server">
      <rect class="box" x="-22.5" y="-40" width="45" height="80"/>
      <text class="label" y="59"></text>
    </g>
</template>

<template id="rotateAnimation">
    <animateTransform class="rotate"
                      attributeType="xml" attributeName="transform"
                      type="rotate"
                      from="0" to="360" dur="2s"
                      repeatCount="indefinite"/>
</template>

<template id="client-portrait">
    <g class="client position">
       <g class="zoom">
          <g class="browser">
              <rect class="background" width="85" height="95" x="-40" y="-50"/>
             
              <g class="browserContents" />
             
              <path class="frame" d="M -40 -50 L -40 45 L 45 45 L 45 -50 L -40 -50 z M -35 -40 L 40 -40 L 40 40 L -35 40 L -35 -40 z"/>
             
              <g class="progressBar" transform="translate(-32.5, -37.5) scale(35,1)">
                 <rect class="space" width="1" height="4"/>
                 <rect class="bar" width="0" height="4"/>
              </g>
              <g class="spinnerContainer" transform="translate(-30,-45)">
                  <path class="spinner" d="M -0.1,-3 A 1,1 0 1 0 0,-1 C 0.6,-1 1,-0.6 1,0 1,0.3 0.9,0.5 0.7,0.7 A 1,1 0 1 0 2.1,2.1 C 2.7,1.6 3,0.8 3,0 3,-1.6 1.6,-3 0,-3 a 1,1 0 0 0 -0.1,0 z" />
              </g>
          </g>
          <text class="label" y="66"></text>
       </g>
    </g>
</template>

<template id="client-landscape">
    <g class="browser client">
        <g class="zoom">
           <rect class="background" width="95" height="85" x="-45" y="-45"/>
           <g class="browserContents" />
           <path class="frame" d="m 50,-45 -95,0 0,85 95,0 z m -5,10 0,70 -85,0 0,-70 z"/>
   
           <g class="progressBar" transform="translate(-37.5, -32.5) scale(35,1)">
               <rect class="space" width="1" height="4"/>
               <rect class="bar" width="0" height="4"/>
           </g>
           <g class="spinnerContainer" transform="translate(-35,-40)">
               <path class="spinner"
                     d="M -0.1,-3 A 1,1 0 1 0 0,-1 C 0.6,-1 1,-0.6 1,0 1,0.3 0.9,0.5 0.7,0.7 A 1,1 0 1 0 2.1,2.1 C 2.7,1.6 3,0.8 3,0 3,-1.6 1.6,-3 0,-3 a 1,1 0 0 0 -0.1,0 z" />
           </g>            
        </g>
    </g>
</template>

<template id="client-singlePageSite">
   <g transform="translate(-40, -50)"> 
   
      <rect class="part unit-0" width="65" height="10" x="10" y="15"/>
      <rect class="part unit-1" width="15" height="25" x="60" y="30"/>
      <rect class="part unit-2" width="15" height="30" x="60" y="60"/>
      
      <rect class="part unit-4" width="10" height="5" x="45" y="45"/>
      <rect class="part unit-3" width="10" height="5" x="45" y="35"/>
      
      <g class="pie">
         <path class="part unit-4"
               d="m 24.9,30.8 c -8.1,0.3 -14.5,6.9 -14.5,15 0,4 1.6,7.5 4.1,10.2 l 10.4,-10.4 z"
         />
         <path class="part unit-3"
               d="m 25.9,30.8 c 0,5 0,10.1 0,15.1 -3.6,3.6 -7.1,7.2 -10.7,10.7 2.7,2.5 6.3,4.1 10.2,4.1 8.3,0 15,-6.7 15,-15 0,-8.1 -6.4,-14.7 -14.5,-15 z"
         />
      </g>
      
      <rect class="part unit-5" width="45" height="5" x="10" y="66"/>
      <rect class="part unit-6" width="45" height="14" x="10" y="76"/>
   </g>
</template>
<template id="client-twitter">
   <g transform="translate(-40, -50)"> 
   
      <clipPath id="viewPort-clip">
          <rect width="75" height="70" x="5" y="15"/>
      </clipPath>
      <g class="tweetsClipper" clip-path="url(#viewPort-clip)">
          <g class="tweets" transform="translate(10, 15)">
              <g class="tweetsScroll"/>
          </g>
      </g>
   </g>
</template>
<template id="tweet">
    <g class="tweet">
        <rect class="shading" width="65" height="18"/>
        <circle class="detail" cx="10" cy="9" r="5"/>
        <rect class="detail" x="20" y="5" width="40" height="8"/>
    </g>
</template>
   
<template id="client-graph">
   <g class="graph" transform="translate(-24,2)">
       
      <g transform="translate(0,22) scale(1,-1)">
         <g class="data">

            <g class="bars">
               <rect class="part unit-1" width="8" height="42"/>
               <rect class="part unit-3" transform="translate(12)"  width="8" height="35"/>
               <rect class="part unit-5" transform="translate(24)"  width="8" height="17"/>
               <rect class="part unit-7" transform="translate(36)"  width="8" height="25"/>
               <rect class="part unit-9" transform="translate(48)"  width="8" height="20"/>
            </g>

            <g class="points" transform="translate(4,0)">
               <line class="part unit-2" transform="translate(12)" x1="-12" y1="36" y2="43"/>
               <line class="part unit-4" transform="translate(24)" x1="-12" y1="43" y2="44"/>
               <line class="part unit-6" transform="translate(36)" x1="-12" y1="44" y2="32"/>
               <line class="part unit-8" transform="translate(48)" x1="-12" y1="32" y2="25"/>
               
               <circle class="part unit-0" cy="36" r="3"/>
               <circle class="part unit-2" transform="translate(12)" cy="43" r="3"/>
               <circle class="part unit-4" transform="translate(24)" cy="44" r="3"/>
               <circle class="part unit-6" transform="translate(36)" cy="32" r="3"/>
               <circle class="part unit-8" transform="translate(48)" cy="25" r="3"/>
            </g>
         </g>

         <path class="axes" d="m -6,50 0,-50 66,0"/>          
      </g>
         
   </g>
</template>
   
<template id="client-map">
    <g class="map">
       <g class="parks">
           <path d="M -5.5,-0.1 4.8,-3.1 6.4,1.1 -3.4,5.2"/>
           <path d="M -10 -45 C -10.5 -44.3 -10.7 -43.6 -10.8 -42.8 L -39.2 -42.5 L -36.1 -27.3 L -21.4 -38.5 L -19.3 -35.1 L -9.2 -35.1 C -8 -31.9 -5.6 -29.3 -2.8 -27.4 C 0.2 -25.9 6.8 -21.1 10 -20 C 15 -15 11.7 -17.3 15 -10 C 17.6 -8.1 22.4 -6.8 25 -5 C 27.9 -4 37.7 -7.1 40 -5 C 41.6 -3.9 41.2 -5.5 41.9 -9.3 C 41 -18.1 46.5 -40.7 40 -45 L -10 -45 z "/>
           <path d="M 10.6,39.5 6.7,31.2 11.8,29.1 17.7,41.3"/>
           <path d="m -24,9.8 10.6,-7.8 -1.4,-3.7 -11.7,9.2"/>
       </g>
       <path class="water" d="m 0,-40 c 2.4,-1.3 3.7,1.4 3.9,3.3 0.6,2 1.3,4.7 3.7,5 2.4,0.2 4.5,2.6 5.9,4.9 2.3,2.4 4.7,2.8 5.6,6 0.8,2.6 2.9,4.3 4.6,6.2 2.8,2.8 6.9,3.2 10.5,3.8 2.5,0.3 5.1,0.6 7.5,1.4 2.2,-0.8 -0.5,-3.3 -2.1,-2.5 -2.7,-0.2 -5.4,-1.2 -7.5,-3 -2.3,-1.6 -4.9,-3.2 -5.9,-6 -0.9,-2 -2,-4.3 -0.8,-6.4 0.9,-1.8 2.4,-3.4 3,-5.4 1.4,-2.3 2.6,-4.8 3.6,-7.2 0.4,-2.8 -3.2,-3.8 -5,-2.1 -2.9,2 -3.8,5.5 -5.5,8.3 -0.8,1.6 -1.5,3.3 -2.6,4.7 -2.4,0.5 -3.7,-2.1 -4.9,-3.7 -2.6,-3.8 -2.6,-9.2 -6.5,-12.2 C 6.7,-45.1 5.6,-45.9 5,-45"/>
       <g class="roads major">
           <path d="m -13.5,-40.2 c 0,0 5,13 13.5,16 8.5,3 9,3.5 10.5,6.3 1.5,2.8 2.3,5.8 3.8,7.3 1.5,1.5 9.2,6.5 11,6.5 1.8,0 14.8,-1.7 14.8,-1.7"/>
           <path d="m 41.2,2.3 c 0,0 -60.2,18 -64.7,18.2 -4.5,0.3 -14.7,0.8 -14.7,0.8"/>
           <path d="m -2,42 c 0,0 -16.8,-17.5 -19.7,-21.2 -3,-3.7 -15.5,-15 -15.5,-18.2 0,-3.2 -0.2,-3.2 -0.2,-3.2"/>
           <path d="M 19.7,8.3 C 17.3,-0.5 20,-2.5 10,-9.7 0,-17 -12.5,-23.5 -15.5,-27.5 c -3,-4 -6.5,-16 -6.5,-16"/>
           <path d="m 3.7,-13.5 c -1.2,3.3 6.2,24 6.2,24"/>
       </g>
       <g class="roads minor">
           <path d="m 43.2,-21 c -7.2,-0.5 -7.9,1.5 -11.3,-1.7 -2.6,-2.4 -1.5,-7.8 0.1,-9.1 4.1,-3.1 8.9,-2.3 8.9,-2.3"/>
           <path d="m -8.7,16.5 c 0,0 -4.6,-17.7 -7.8,-20.7 -3.2,-3 -9.4,-12.9 -12.2,-14 -2.8,-1.1 -9.2,-4.6 -9.2,-4.6"/>
           <path d="M -5.7,16 C 2.7,28.4 4.4,42.5 4.4,42.5"/>
           <path d="m -7.1,16 c -1.1,7.6 0.5,9.9 -1.4,14 C -10.4,34 -20.7,42.7 -20.7,42.7"/>
           <path d="m -34.8,42.5 c 0,0 8.3,-13.6 12.2,-16.1 3.9,-2.5 12.9,-4.8 13.6,-5.3 0.7,-0.5 1.8,-2.1 1.8,-2.1"/>
           <path d="M 9,12.1 24,42.9"/>
           <path d="M 20,8.7 35.4,41.8"/>
           <path d="m 2.7,-14.1 c -8.7,1.8 -16.8,3.7 -18.4,4.4 -1.6,0.7 -3.2,2.1 -3.2,2.1"/>
           <path d="M -0.5,24.6 24.6,17.6 24.2,18.1"/>
           <path d="m 1.8,32.1 c 0,0 27.8,-7.2 30.2,-7.8 2.5,-0.5 3.7,-2.1 3.5,-3.5 C 35.4,19.3 30.2,6.4 30.2,6.4 L 25.6,6.8"/>
           <path d="M 4.2,39.3 40.5,30.7"/>
           <path d="M -31.5,10.7 -6.5,-6.8"/>
           <path d="m -7.8,-11.6 c 1.2,4.2 2.3,10.1 2.8,12.6 C -4.4,3.4 0,13.5 0,13.5 l 0,0 0,0"/>
           <path d="M -11.5,7.8 C -6.2,5.7 6.2,1.7 6.2,1.7"/>
           <path d="M 29.9,4.7 C 28.3,1.1 18,-2.8 18,-2.8"/>
           <path d="m -21.4,-38.6 -15,11.7"/>
           <path d="m -21.4,-11.2 c 4.1,-3.4 8.5,-3.4 6,-6.5 -2.5,-3.2 -11.7,-16.6 -11.7,-16.6"/>
           <path d="m -29.9,-32.1 -6.2,-8.5"/>
           <path d="m -25.1,16.7 c 5.3,-4.6 12.7,-8.1 14,-9 1.2,-0.9 1.2,-0.9 1.2,-0.9"/>
           <path d="M -21,13 -26.7,7.7"/>
           <path d="M -16.1,10.1 C -21.6,0.4 -17.5,5.6 -21.9,0.2 -26.3,-5.1 -37.1,-10.5 -37.1,-10.5"/>
           <path d="m -21.2,-10.2 c 0,0 -8.8,5.8 -10.1,6.7 -1.2,0.9 -4.4,3.5 -4.4,3.5"/>
           <path d="m -25.3,28.9 c -1.2,-2.3 -2.3,-4.4 -5.3,-4.1 -3,0.4 -6,1.6 -6,1.6"/>
           <path d="m 21.7,27.5 7.4,13.4"/>
           <path d="M 6.2,1.7 16.6,-1"/>
           <path d="m -26.2,-16.2 7.8,-5.5"/>
           <path d="m -22.8,-27.5 -9.9,7.1"/>
           <path d="M 9.2,-10 15,8.9"/>
           <path d="m 12.2,29.6 5.5,12.6"/>
           <path d="M 6.7,30.8 11.3,41.6"/>
           <path d="M -17,26.8 -30.4,42.9"/>
           <path d="M -14.5,29.8 -23.9,42.7"/>
           <path d="m -27.6,31.2 10.1,7.6"/>
       </g>
       <g class="pins">
           <g class="part unit-8" transform="translate(18,3)"      ><path class="shadow" d="M -0.33,0 5.67,-3 11,-9 4.33,-9 -1,-3 z"/><path class="pointer" d="m 0,0 5,-5 0,-10 -10,0 0,10 z"/></g>
           <g class="part unit-1" transform="translate(0.1,-4.8)"  ><path class="shadow" d="M -0.33,0 5.67,-3 11,-9 4.33,-9 -1,-3 z"/><path class="pointer" d="m 0,0 5,-5 0,-10 -10,0 0,10 z"/></g>
           <g class="part unit-7" transform="translate(-14,-6)"    ><path class="shadow" d="M -0.33,0 5.67,-3 11,-9 4.33,-9 -1,-3 z"/><path class="pointer" d="m 0,0 5,-5 0,-10 -10,0 0,10 z"/></g>
           <g class="part unit-3" transform="translate(-9.8,0.6)"  ><path class="shadow" d="M -0.33,0 5.67,-3 11,-9 4.33,-9 -1,-3 z"/><path class="pointer" d="m 0,0 5,-5 0,-10 -10,0 0,10 z"/></g>
           <g class="part unit-4" transform="translate(4.4,8.5)"   ><path class="shadow" d="M -0.33,0 5.67,-3 11,-9 4.33,-9 -1,-3 z"/><path class="pointer" d="m 0,0 5,-5 0,-10 -10,0 0,10 z"/></g>
           <g class="part unit-5" transform="translate(-15.6,15.5)"><path class="shadow" d="M -0.33,0 5.67,-3 11,-9 4.33,-9 -1,-3 z"/><path class="pointer" d="m 0,0 5,-5 0,-10 -10,0 0,10 z"/></g>
           <g class="part unit-6" transform="translate(-4.8,22.6)" ><path class="shadow" d="M -0.33,0 5.67,-3 11,-9 4.33,-9 -1,-3 z"/><path class="pointer" d="m 0,0 5,-5 0,-10 -10,0 0,10 z"/></g>
           <g class="part unit-2" transform="translate(4,27)"      ><path class="shadow" d="M -0.33,0 5.67,-3 11,-9 4.33,-9 -1,-3 z"/><path class="pointer" d="m 0,0 5,-5 0,-10 -10,0 0,10 z"/></g>
           <g class="part unit-0" transform="translate(26,13)"     ><path class="shadow" d="M -0.33,0 5.67,-3 11,-9 4.33,-9 -1,-3 z"/><path class="pointer" d="m 0,0 5,-5 0,-10 -10,0 0,10 z"/></g>
           <g class="part unit-9" transform="translate(18.5,23.9)" ><path class="shadow" d="M -0.33,0 5.67,-3 11,-9 4.33,-9 -1,-3 z"/><path class="pointer" d="m 0,0 5,-5 0,-10 -10,0 0,10 z"/></g>
       </g>
   </g>
</template>

<template id="client-cartogram">
    <g class="cartogram">
       <g class="states" transform="translate(-37, -34) scale(2)">
            <path data-state="ca" d="m 0,16 0,4 1,0 0,-1 1,0 0,3 -1,0 0,-1 -1,0 0,3 1,0 0,1 1,0 0,1 1,0 0,2 1,0 0,1 4,0 0,-5 -2,0 0,-1 -1,0 0,-1 -1,0 0,-5 -3,0 0,-1 -1,0 z"/>
            <path data-state="or" d="m 0,15 0,1 1,0 0,1 3,0 0,-2 -4,0 z"/>
            <path data-state="wa" d="m 1,12 0,1 -1,0 0,2 5,0 0,-1 -1,0 0,-2 -3,0 z"/>
            <path data-state="nv" d="m 4,17 0,5 1,0 0,-4 1,0 0,-1 -2,0 z"/>
            <path data-state="co" d="m 7,17 3,0 0,3 -3,0 z"/>
            <path data-state="nm" d="m 9,20 0,1 -1,0 0,2 2,0 0,-3 -1,0 z"/>
            <path data-state="ia" d="m 14,12 0,2 -1,0 0,1 3,0 0,-2 -1,0 0,-1 -1,0 z"/>
            <path data-state="mn" d="m 14,6 0,6 1,0 0,1 1,0 0,-3 -1,0 0,-3 1,0 0,-1 -2,0 z"/>
            <path data-state="wi" d="m 15,7 0,3 1,0 0,1 2,0 0,-4 -1,0 0,1 -1,0 0,-1 -1,0 z"/>
            <path data-state="il" d="m 16,11 0,6 1,0 0,2 1,0 0,-1 1,0 0,-6 -1,0 0,-1 -2,0 z"/>
            <path data-state="mi" d="m 18,6 0,1 2,0 0,-1 -2,0 z m 2,1 0,5 3,0 0,-1 1,0 0,-2 -1,0 0,1 -1,0 0,-3 -2,0 z"/>
            <path data-state="oh" d="m 21,12 0,5 2,0 0,1 1,0 0,-1 1,0 0,-4 -1,0 0,1 -1,0 0,-2 -2,0 z"/>
            <path data-state="va" d="m 26,17 0,1 -2,0 0,1 -1,0 0,1 8,0 0,-1 -3,0 0,-1 -1,0 0,-1 -1,0 z"/>
            <path data-state="fl" d="m 20,24 0,2 4,0 0,4 1,0 0,1 1,0 0,1 1,0 0,-1 1,0 0,-5 -2,0 0,-1 -4,0 0,-1 -2,0 z m 6,8 -1,0 0,1 1,0 0,-1 z"/>
            <path data-state="dc" d="m 27,17 0,1 1,0 0,1 1,0 0,-2 -2,0 z"/>
            <path data-state="md" d="m 26,16 0,1 3,0 0,2 3,0 0,-1 -1,0 0,-2 -5,0 z"/>
            <path data-state="de" d="m 31,15 0,3 1,0 0,-3 -1,0 z"/>
            <path data-state="pa" d="m 27,11 0,1 -1,0 0,1 -1,0 0,2 2,0 0,1 4,0 0,-1 -1,0 0,-3 -1,0 0,-1 -2,0 z"/>
            <path data-state="nj" d="m 30,12 0,3 2,0 0,2 1,0 0,-1 1,0 0,-3 -1,0 0,-1 -3,0 z"/>
            <path data-state="ny" d="m 31,5 0,1 -1,0 0,2 -3,0 0,1 1,0 0,1 -1,0 0,1 2,0 0,1 3,0 0,-2 1,0 0,-5 -2,0 z m 2,5 0,1 2,0 0,-1 -2,0 z"/>
            <path data-state="ct" d="m 33,7 0,3 1,0 0,-1 2,0 0,-2 -3,0 z"/>
            <path data-state="ri" d="m 36,7 0,2 2,0 0,-2 -2,0 z"/>
            <path data-state="ma" d="m 34,5 0,1 -1,0 0,1 7,0 0,-2 -1,0 0,1 -2,0 0,-1 -3,0 z"/>
            <path data-state="vt" d="m 33,4 0,2 1,0 0,-1 1,0 0,-1 -2,0 z"/>
            <path data-state="nh" d="m 35,3 0,2 2,0 0,-2 -2,0 z"/>
            <path data-state="me" d="m 36,1 0,2 2,0 0,-2 -2,0 z"/>
            <path data-state="hi" d="m 0,30 0,1 1,0 0,-1 -1,0 z m 1,1 0,1 1,0 0,-1 -1,0 z m 1,1 0,1 2,0 0,-1 -2,0 z"/>
            <path data-state="nd" d="m 9,15 0,1 3,0 0,-1 -3,0 z"/>
            <path data-state="id" d="m 4,15 0,2 2,0 0,-2 -2,0 z"/>
            <path data-state="ut" d="m 6,17 0,1 -1,0 0,3 1,0 0,-1 1,0 0,-3 -1,0 z"/>
            <path data-state="az" d="m 6,20 0,1 -1,0 0,2 1,0 0,1 2,0 0,-3 1,0 0,-1 -3,0 z"/>
            <path data-state="mt" d="m 6,15 0,1 3,0 0,-1 -3,0 z"/>
            <path data-state="wy" d="m 6,16 0,1 3,0 0,-1 -3,0 z"/>
            <path data-state="sd" d="m 9,16 0,1 3,0 0,-1 -3,0 z"/>
            <path data-state="ks" d="m 10,17 3,0 0,2 -3,0 z"/>
            <path data-state="ok" d="m 13,18 0,1 -3,0 0,1 2,0 0,1 2,0 0,-3 -1,0 z"/>
            <path data-state="tx" d="m 10,20 0,3 -2,0 0,1 1,0 0,2 1,0 0,-1 1,0 0,4 1,0 0,-1 2,0 0,-2 1,0 0,-1 1,0 0,-1 -1,0 0,-3 -3,0 0,-1 -2,0 z"/>
            <path data-state="ne" d="m 12,15 0,2 1,0 0,1 1,0 0,-3 -2,0 z"/>
            <path data-state="mo" d="m 14,15 0,4 3,0 0,-2 -1,0 0,-2 -2,0 z"/>
            <path data-state="ar" d="m 14,19 0,2 3,0 0,-2 -3,0 z"/>
            <path data-state="la" d="m 15,21 0,3 1,0 0,1 2,0 0,-2 -2,0 0,-1 1,0 0,-1 -2,0 z"/>
            <path data-state="ms" d="m 17,21 0,1 -1,0 0,1 2,0 0,1 1,0 0,-3 -2,0 z"/>
            <path data-state="tn" d="m 17,19 0,2 4,0 1,0 0,-1 1,0 0,-1 -6,0 z"/>
            <path data-state="al" d="m 19,21 0,3 3,0 0,-3 -3,0 z"/>
            <path data-state="ky" d="m 21,17 0,1 -3,0 0,1 6,0 0,-1 -1,0 0,-1 -2,0 z"/>
            <path data-state="in" d="m 20,12 0,1 -1,0 0,5 2,0 0,-6 -1,0 z"/>
            <path data-state="nc" d="m 22,20 0,1 3,0 0,1 3,0 0,1 1,0 0,-1 1,0 0,-1 1,0 0,-1 -9,0 z"/>
            <path data-state="ga" d="m 22,21 0,4 4,0 0,1 2,0 0,-1 -1,0 0,-1 -2,0 0,-3 -3,0 z"/>
            <path data-state="sc" d="m 25,22 0,2 2,0 0,1 2,0 0,-2 -1,0 0,-1 -3,0 z"/>
            <path data-state="wv" d="m 25,15 0,2 -1,0 0,1 2,0 0,-2 1,0 0,-1 -2,0 z"/>
            <path data-state="ak" d="m 0,6 0,2 2,0 0,-1 -1,0 0,-1 -1,0 z"/>
       </g>
       <g class="pie" transform="translate(33, 16) scale(7)">
         <circle class="pie" r="1"/>
         <path data-wonby="dem" />
         <path data-wonby="rep" transform="scale(-1,1)" />
         <line y1="1.2" />
       </g>
    </g>
</template>

<template id="packet">
    <circle class="packet" r=""/>
</template>
<template id="firstPacket">
    <g class="packet">
        <circle r=""/>
        <text y="3.5">{</text>
    </g>
</template>
<template id="lastPacket">
    <g class="packet">
        <circle r=""/>
        <text y="3.5">}</text>
    </g>
</template>
<template id="getRequest">
    <g class="packet">
        <circle r=""/>
        <text y="3.5" class="method">GET</text>
    </g>
</template>
<template id="airwavePacket">
    <g class="packetClip">
        <circle class="packet airwave" r="0"/>
    </g>
</template>
<template id="airwaveDone">
    <circle class="packet flash" r="8.5"/>
</template>
<template id="barrier">
    <g class="barrier">
        <path class="shadow" d="m 150,-110 -250,0 20,155 -60,60 330,0 -60,-60 z"/>
        <path class="wall" d="m -105,-124 0,169 25,0 0,-84 c 0,-35.9 47,-65 105,-65 58,0 105,29.1 105,65 l 0,84 25,0 0,-169 z"/>
        <clipPath id="downstream-clip">
            <path d="m 25,-104 c -58,0 -105,29.1 -105,65 l 0,84 -60,60 330,0 -60,-60 0,-84 c 0,-35.8 -47,-65 -105,-65 z"/>
        </clipPath>
        <clipPath id="upstream-clip">
            <path d="m -105,45 60,60 -435,0 0,-320 640,0 0,50 -265,41 z"/>
        </clipPath>
    </g>
</template>
</svg>


        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', '', 'oboejs.com');
            ga('send', 'pageview');
        </script>
    </body>
</html>
