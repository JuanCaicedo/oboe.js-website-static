<!DOCTYPE html>
<html>
    <head>

       <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

       <meta name="description" content="A streaming approach to JSON. Oboe.js is a Javascript library for Node.js and browsers that speeds up web applications by providing parsed objects before the response completes"/>

       <meta name="keywords" content="json streaming node.js browsers"/>

        <link rel="stylesheet" href="css/all.css">

        <title>Examples : Oboe.js</title>

       <link rel="icon" type="image/png" href="favicons/favicon-32.png" sizes="32x32">
       <link rel="icon" type="image/png" href="favicons/favicon-16.png" sizes="16x16">

    </head>
    <body >
        <div id="header">
        </div>
        <nav id="siteNav">
            <svg width="24" height="24" class="menuButton" >
                <rect class="background" width="24" height="24" />
                <rect class="rung" width="16" height="4" x="4" y="3"  />
                <rect class="rung" width="16"  height="4" x="4" y="10"  />
                <rect class="rung" width="16" height="4" x="4" y="17" />
            </svg>
           <ul>
              
              
                  <li class="reducedLogo"><a href="www.juancaicedo.com/oboe.js-website/">Oboe.js</a></li>
              

              
                  <li>
                     
                         <a class="siteLink" href="www.juancaicedo.com/oboe.js-website/why">Why Oboe.js?</a>
                     
                  </li>

              
                  <li>
                     
                         <a class="siteLink" href="www.juancaicedo.com/oboe.js-website/examples">Examples</a>
                     
                  </li>

              
                  <li>
                     
                         <a class="siteLink" href="www.juancaicedo.com/oboe.js-website/api">API</a>
                     
                  </li>

              
                  <li>
                     
                         <a class="siteLink" href="www.juancaicedo.com/oboe.js-website/download">Download</a>
                     
                  </li>

              
                  <li>
                     
                         <a class="siteLink" href="www.juancaicedo.com/oboe.js-website/discuss">Discuss</a>
                     
                  </li>

              
           </ul>
        </nav>
        <div id="pagearea">
           <header class="row">
              
              
                  <h1><a href="www.juancaicedo.com/oboe.js-website/">Oboe.js</a></h1>
              

              
           </header>

           <div class="row">

              <nav class="col col1">

                 

                 
                    
                       <div class="internalNav">
                          <h2>Examples</h2>
                          
                             <ul class="sections">
                                
                                   <li><a href="#a-simple-download">A simple download</a></li>
                                
                                   <li><a href="#extracting-objects-from-the-json-stream">Extracting objects from the JSON stream</a></li>
                                
                                   <li><a href="#duck-typing">Duck typing</a></li>
                                
                                   <li><a href="#hanging-up-when-we-have-what-we-need">Hanging up when we have what we need</a></li>
                                
                                   <li><a href="#detecting-strings-numbers">Detecting strings, numbers</a></li>
                                
                                   <li><a href="#reacting-before-we-get-the-whole-object">Reacting before we get the whole object</a></li>
                                
                                   <li><a href="#giving-some-visual-feedback-as-a-page-is-updating">Giving some visual feedback as a page is updating</a></li>
                                
                                   <li><a href="#taking-meaning-from-a-node-s-location">Taking meaning from a node&#x27;s location</a></li>
                                
                                   <li><a href="#deregistering-a-callback">Deregistering a callback</a></li>
                                
                                   <li><a href="#css4-style-patterns">Css4 style patterns</a></li>
                                
                                   <li><a href="#transforming-json-while-it-is-streaming">Transforming JSON while it is streaming</a></li>
                                
                                   <li><a href="#demarshalling-json-to-an-oop-model">Demarshalling JSON to an OOP model</a></li>
                                
                                   <li><a href="#loading-json-trees-larger-than-the-available-ram">Loading JSON trees larger than the available RAM</a></li>
                                
                                   <li><a href="#streaming-out-html-from-express">Streaming out HTML from express</a></li>
                                
                                   <li><a href="#using-oboe-with-d3-js">Using Oboe with d3.js</a></li>
                                
                                   <li><a href="#reading-from-node-js-streams">Reading from Node.js streams</a></li>
                                
                                   <li><a href="#rolling-back-on-error">Rolling back on error</a></li>
                                
                                   <li><a href="#example-patterns">Example patterns</a></li>
                                
                             </ul>
                          
                       </div>
                    
                 

                 
              </nav>
              <div class="col col2">

                 <main class="marked">
                   
<h2 id="a-simple-download">A simple download</h2>
<p>It isn&#39;t what Oboe was built for but it works fine as a simple AJAX library.
This might be a good tactic to drop it into an existing application before iteratively refactoring
towards progressive loading. The call style should be familiar to jQuery users.</p>
<pre><code class="undefinedjs">oboe(<span class="string">'/myapp/things.json'</span>)
   .done(<span class="keyword">function</span>(things) {

      <span class="comment">// we got it</span>
   })
   .fail(<span class="keyword">function</span>() {

      <span class="comment">// we don't got it</span>
   });</code></pre>
<h2 id="extracting-objects-from-the-json-stream">Extracting objects from the JSON stream</h2>
<p>Say we have a resource called things.json that we need to fetch:</p>
<pre><code class="undefinedjs">{
   <span class="string">"foods"</span>: [
      {<span class="string">"name"</span>:<span class="string">"aubergine"</span>,    <span class="string">"colour"</span>:<span class="string">"purple"</span>},
      {<span class="string">"name"</span>:<span class="string">"apple"</span>,        <span class="string">"colour"</span>:<span class="string">"red"</span>},
      {<span class="string">"name"</span>:<span class="string">"nuts"</span>,         <span class="string">"colour"</span>:<span class="string">"brown"</span>}
   ],
   <span class="string">"badThings"</span>: [
      {<span class="string">"name"</span>:<span class="string">"poison"</span>,       <span class="string">"colour"</span>:<span class="string">"pink"</span>},
      {<span class="string">"name"</span>:<span class="string">"broken_glass"</span>, <span class="string">"colour"</span>:<span class="string">"green"</span>}
   ]
}</code></pre>
<p>On the client side we want to download and use this JSON. Running the
code below, each item will be logged as soon as it is transferred
without waiting for the whole download to complete.</p>
<pre><code class="undefinedjs">oboe(<span class="string">'/myapp/things.json'</span>)
   .node(<span class="string">'foods.*'</span>, <span class="keyword">function</span>( foodThing ){

      <span class="comment">// This callback will be called everytime a new object is</span>
      <span class="comment">// found in the foods array.</span>

      console.log( <span class="string">'Go eat some'</span>, foodThing.name);
   })
   .node(<span class="string">'badThings.*'</span>, <span class="keyword">function</span>( badThing ){

      console.log( <span class="string">'Stay away from'</span>, badThing.name);
   })
   .done(<span class="keyword">function</span>(things){

      console.log(
         <span class="string">'there are'</span>, things.foods.length, <span class="string">'things to eat'</span>,
         <span class="string">'and'</span>, things.nonFoods.length, <span class="string">'to avoid'</span>);
   });</code></pre>
<h2 id="duck-typing">Duck typing</h2>
<p>Sometimes it is easier to say <em>what you are trying to find</em> than <em>where you&#39;d like to find it</em>.
<a href="http://en.wikipedia.org/wiki/Duck_typing">Duck typing</a> is provided for these cases.</p>
<pre><code class="undefinedjs">oboe(<span class="string">'/myapp/things.json'</span>)
   .node(<span class="string">'{name colour}'</span>, <span class="keyword">function</span>( thing ) {
      <span class="comment">// I'll be called for every object found that</span>
      <span class="comment">// has both a name and a colour</span>
      console.log(thing.name, <span class="string">' is '</span>, thing.colour);
   };</code></pre>
<h2 id="hanging-up-when-we-have-what-we-need">Hanging up when we have what we need</h2>
<p>If you don&#39;t control the data source the service sometimes returns more information than your
application actually needs.</p>
<p>If we only care about the foods and not the non-foods we
can hang up as soon as we have the foods, reducing our precious
download footprint.</p>
<pre><code class="undefinedjs">oboe(<span class="string">'/myapp/things.json'</span>)
   .node({
      <span class="string">'foods.*'</span>: <span class="keyword">function</span>( foodObject ){

         alert(<span class="string">'go ahead and eat some '</span> + foodObject.name);
      },
      <span class="string">'foods'</span>: <span class="keyword">function</span>(){
         <span class="comment">// We have everything that we need. That's enough.</span>
         <span class="keyword">this</span>.abort();
      }
   });</code></pre>
<h2 id="detecting-strings-numbers">Detecting strings, numbers</h2>
<p>Want to detect strings or numbers instead of objects? Oboe doesn&#39;t care about node
types so the syntax is the same:</p>
<pre><code class="undefinedjs">oboe(<span class="string">'/myapp/things.json'</span>)
   .node({
      <span class="string">'colour'</span>: <span class="keyword">function</span>( colour ){
         <span class="comment">// (colour instanceof String) === true</span>
      }
   });</code></pre>
<h2 id="reacting-before-we-get-the-whole-object">Reacting before we get the whole object</h2>
<p>As well as <code>node</code> events, you can listen on <code>path</code> events which fire when
locations in the JSON are found, before we know what will be found there.
Here we eagerly create elements before we have their content
so that the page updates as soon as possible:</p>
<pre><code class="undefinedjs"><span class="keyword">var</span> currentPersonElement;
oboe(<span class="string">'people.json'</span>)
   .path(<span class="string">'people.*'</span>, <span class="keyword">function</span>(){
      <span class="comment">// we don't have the person's details yet but we know we</span>
      <span class="comment">// found someone in the json stream. We can eagerly put</span>
      <span class="comment">// their div to the page and then fill it with whatever</span>
      <span class="comment">// other data we find:</span>
      currentPersonElement = <math title="(&lt;span class=" string"="">'<div class="person">');"><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mo>&lt;</mo><mi>d</mi><mi>i</mi><mi>v</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mrow><mtext></mtext></mrow><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>)</mo></mrow><mo>;</mo></div></math>(<span class="string">'#people'</span>).append(currentPersonElement);
   })
   .node({
      <span class="string">'people.*.name'</span>: <span class="keyword">function</span>( name ){
         <span class="comment">// we just found out their name, lets add it</span>
         <span class="comment">// to their div:</span>
         currentPersonElement.append(
            <span class="string">'&lt;span class="name"&gt;'</span> + name + <span class="string">'&lt;/span&gt;'</span>);
      },
      <span class="string">'people.*.email'</span>: <span class="keyword">function</span>( email ){
         <span class="comment">// we just found out their email, lets add</span>
         <span class="comment">// it to their div:</span>
         currentPersonElement.append(
            <span class="string">'&lt;span class="email"&gt;'</span> + email + <span class="string">'&lt;/span&gt;'</span>);
      }
   });</code></pre>
<h2 id="giving-some-visual-feedback-as-a-page-is-updating">Giving some visual feedback as a page is updating</h2>
<p>Suppose we&#39;re using progressive rendering to go to the next &#39;page&#39; in a dashboard-style single page webapp
and want to put some kind of indication on the page as individual modules load.</p>
<p>We use a spinner to give visual feedback when an area of the page is loading and remove it
when we have the data for that area.</p>
<pre><code class="undefinedjs"><span class="comment">// JSON from the server side:</span>
{
   <span class="string">'progress'</span>:[
      <span class="string">'faster loading'</span>,
      <span class="string">'maintainable velocity'</span>,
      <span class="string">'more beer'</span>
   ],
   <span class="string">'problems'</span>:[
      <span class="string">'technical debt'</span>,
      <span class="string">'team drunk'</span>
   ]
}</code></pre>
<pre><code class="undefinedjs">MyApp.showSpinnerAt(<span class="string">'#progress'</span>);
MyApp.showSpinnerAt(<span class="string">'#problems'</span>);

oboe(<span class="string">'/agileReport/sprint42'</span>)
   .node({
      <span class="string">'!.progress.*'</span>: <span class="keyword">function</span>( itemText ){
         <math title="(&lt;span class=" string"="">'#progress') .append(<span class="string">'<div>'</div></span>) .text(<span class="string">'We made progress in '</span> + itemText); }, <span class="string">'!.progress'</span>: <span class="keyword">function</span>(){ MyApp.hideSpinnerAt(<span class="string">'#progress'</span>); }, <span class="string">'!.problems.*'</span>: <span class="keyword">function</span>( itemText ){"><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mo>#</mo><mi>p</mi><mi>r</mi><mi>o</mi><mrow><mi>g</mi><mi>r</mi></mrow><mi>e</mi><mi>s</mi><mi>s</mi><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>)</mo></mrow><mo>.</mo><mi>a</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>n</mi><mi>d</mi><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mo>&lt;</mo><mi>d</mi><mi>i</mi><mi>v</mi><mo>&gt;</mo><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>)</mo></mrow><mo>.</mo><mrow><mtext>&lt;span class=&quot;string&quot;&gt;'We made progress in '&lt;/span&gt; + itemText</mtext></mrow><mo>;</mo><mo>}</mo><mo>,</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mo>!</mo><mo>.</mo><mi>p</mi><mi>r</mi><mi>o</mi><mrow><mi>g</mi><mi>r</mi></mrow><mi>e</mi><mi>s</mi><mi>s</mi><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>:</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mrow><mi>f</mi><mi>u</mi></mrow><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mrow><mo>(</mo><mo>)</mo></mrow><mrow><mo>{</mo><mi>M</mi><mi>y</mi><mi>A</mi><mi>p</mi><mi>p</mi><mo>.</mo><mi>h</mi><mi>i</mi><mi>d</mi><mi>e</mi><mi>S</mi><mi>&pi;</mi><mo>&cap;</mo><mi>e</mi><mi>r</mi><mi>A</mi><mi>t</mi><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mo>#</mo><mi>p</mi><mi>r</mi><mi>o</mi><mrow><mi>g</mi><mi>r</mi></mrow><mi>e</mi><mi>s</mi><mi>s</mi><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>)</mo></mrow><mo>;</mo><mo>}</mo></mrow><mo>,</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mo>!</mo><mo>.</mo><mi>p</mi><mi>r</mi><mi>o</mi><mi>b</mi><mo>&le;</mo><mi>m</mi><mi>s</mi><mo>.</mo><mo>&sdot;</mo><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>:</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mrow><mi>f</mi><mi>u</mi></mrow><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mrow><mo>(</mo><mi>i</mi><mi>t</mi><mi>e</mi><mi>m</mi><mi>T</mi><mi>e</mi><mi>x</mi><mi>t</mi><mo>)</mo></mrow><mrow><mo>{</mo><mo></mo></mrow></math>(<span class="string">'#problems'</span>)
            .append(<span class="string">'&lt;div&gt;'</span>)
            .text(<span class="string">'We had problems with '</span> + itemText);
      },
      <span class="string">'!.problems'</span>: <span class="keyword">function</span>(){
         MyApp.hideSpinnerAt(<span class="string">'#problems'</span>);
      }
   });</code></pre>
<h2 id="taking-meaning-from-a-node-s-location">Taking meaning from a node&#39;s location</h2>
<p>Node and path callbacks receive a description of where items are found
as an array of strings describing the path from the JSON root.
It is sometimes preferable to
register a wide-matching pattern and use the item&#39;s location to
decide programmatically what to do with it.</p>
<pre><code class="undefinedjs"><span class="comment">// JSON data for homepage of a social networking site.</span>
<span class="comment">// Each top-level object is for a different module on the page.</span>
{  <span class="string">"notifications"</span>:{
      <span class="string">"newNotifications"</span>: <span class="number">2</span>,
      <span class="string">"totalNotifications"</span>: <span class="number">8</span>
   },
   <span class="string">"messages"</span>: [
      {  <span class="string">"from"</span>:<span class="string">"Joe"</span>,
         <span class="string">"subject"</span>:<span class="string">"Wanna go fishing?"</span>,
         <span class="string">"url"</span>:<span class="string">"messages/1"</span>
      },
      {  <span class="string">"from"</span>:<span class="string">"Baz"</span>,
         <span class="string">"subject"</span>:<span class="string">"Hello"</span>,
         <span class="string">"url"</span>:<span class="string">"messages/2"</span>
      }
   ],
   <span class="string">"photos"</span>: {
      <span class="string">"new"</span>: [
         {  <span class="string">"title"</span>: <span class="string">"Birthday Party"</span>,
            <span class="string">"url"</span>:<span class="string">"/photos/5"</span>,
            <span class="string">"peopleTagged"</span>:[<span class="string">"Joe"</span>,<span class="string">"Baz"</span>]
         }
      ]
   }
   <span class="comment">// ... other modules ...</span>
}</code></pre>
<pre><code class="undefinedjs">oboe(<span class="string">'http://mysocialsite.example.com/homepage'</span>)
   .node(<span class="string">'!.*'</span>, <span class="keyword">function</span>( moduleJson, path ){

      <span class="comment">// This callback will be called with every direct child</span>
      <span class="comment">// of the root object but not the sub-objects therein.</span>
      <span class="comment">// Because we're maching direct children of the root the</span>
      <span class="comment">// path argument is a single-element array with the module</span>
      <span class="comment">// name; it resembles ['messages'] or ['photos'].</span>
      <span class="keyword">var</span> moduleName = path[<span class="number">0</span>];

      My.App
         .getModuleCalled(moduleName)
         .showNewData(moduleJson);
   });</code></pre>
<h2 id="deregistering-a-callback">Deregistering a callback</h2>
<p>Calling <code>this.forget()</code> from inside a callback deregisters that listener.</p>
<pre><code class="undefinedjs">
<span class="comment">// We have a list of items to plot on a map. We want to draw</span>
<span class="comment">// the first ten while they're loading. After that we want</span>
<span class="comment">// to store the rest in a model to be drawn later.</span>

oboe(<span class="string">'/listOfPlaces'</span>)
   .node(<span class="string">'list.*'</span>, <span class="keyword">function</span>( item, path ){
      <span class="keyword">var</span> itemIndex = path[path.length-<span class="number">1</span>];

      model.addItemToModel(item);
      view.drawItem(item);

      <span class="keyword">if</span>( itemIndex == <span class="number">10</span> ) {
         <span class="keyword">this</span>.forget();
      }
   })
   .done(<span class="keyword">function</span>( fullJson ){
      <span class="keyword">var</span> undrawnItems = fullJson.list.slice(<span class="number">10</span>);

      model.addItemsToModel(undrawnItems);
   });</code></pre>
<h2 id="css4-style-patterns">Css4 style patterns</h2>
<p>Sometimes when downloading an array of items it isn&#39;t very useful to be given each element individually.
It is easier to integrate with libraries like <a href="http://angularjs.org/">Angular</a> if you&#39;re given an array
repeatedly whenever a new element is concatenated onto it.</p>
<p>Oboe supports css4-style selectors and gives them much the same meaning as in the
<a href="http://www.w3.org/TR/2011/WD-selectors4-20110929/#subject">proposed css level 4 selector spec</a>.</p>
<p>If a term is prefixed with a dollar sign, the node matching that term is explicitly selected,
even if the pattern as a whole matches a node further down the tree.</p>
<pre><code class="undefinedjs"><span class="comment">// JSON</span>
{<span class="string">"people"</span>: [
   {<span class="string">"name"</span>:<span class="string">"Baz"</span>, <span class="string">"age"</span>:<span class="number">34</span>, <span class="string">"email"</span>: <span class="string">"baz@example.com"</span>}
   {<span class="string">"name"</span>:<span class="string">"Boz"</span>, <span class="string">"age"</span>:<span class="number">24</span>}
   {<span class="string">"name"</span>:<span class="string">"Bax"</span>, <span class="string">"age"</span>:<span class="number">98</span>, <span class="string">"email"</span>: <span class="string">"bax@example.com"</span>}}
]}</code></pre>
<pre><code class="undefinedjs"><span class="comment">// we are using Angular and have a controller:</span>
<span class="function"><span class="keyword">function</span> <span class="title">PeopleListCtrl</span><span class="params">(<math title="scope)&lt;/span&gt; {&lt;/span&gt; oboe(&lt;span class=" string"="">'/myapp/things'</math></span>) .node(<span class="string">'"><mi>s</mi><mi>c</mi><mi>o</mi><mi>p</mi><mi>e</mi><mo>)</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mrow><mo>{</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mi>o</mi><mi>b</mi><mi>o</mi><mi>e</mi><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mfrac><mo>'</mo><mi>m</mi></mfrac><mi>y</mi><mi>a</mi><mi>p</mi><mfrac><mi>p</mi><mi>t</mi></mfrac><mi>h</mi><mo>&isin;</mo><mrow><mi>g</mi><mi>s</mi></mrow><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>)</mo></mrow><mo>.</mo><mi>n</mi><mi>o</mi><mi>d</mi><mi>e</mi><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo></mrow></mrow>people[*]'</span>, <span class="keyword">function</span>( peopleLoadedSoFar ){

         <span class="comment">// This callback will be called with a 1-length array,</span>
         <span class="comment">// a 2-length array, a 3-length array etc until the</span>
         <span class="comment">// whole thing is loaded.</span>
         <span class="comment">// Putting this array on the scope object under</span>
         <span class="comment">// Angular re-renders the list of people.</span>

         <math title="scope.people = peopleLoadedSoFar; }); }&lt;/code&gt;&lt;/pre&gt; &lt;p&gt;Like css4 stylesheets, this can also be used to express a &apos;containing&apos; operator.&lt;/p&gt; &lt;pre&gt;&lt;code class=" undefinedjs"="">oboe(<span class="string">'/myapp/things'</span>) .node(<span class="string">'people."><mi>s</mi><mi>c</mi><mi>o</mi><mi>p</mi><mi>e</mi><mo>.</mo><mi>p</mi><mi>e</mi><mi>o</mi><mi>p</mi><mo>&le;</mo><mo>=</mo><mi>p</mi><mi>e</mi><mi>o</mi><mi>p</mi><mo>&le;</mo><mi>L</mi><mi>o</mi><mi>a</mi><mi>d</mi><mi>e</mi><mi>d</mi><mi>S</mi><mi>o</mi><mi>F</mi><mi>a</mi><mi>r</mi><mo>;</mo><mo>}</mo><mo>)</mo><mo>;</mo><mo>}</mo><mfrac><mo>&lt;</mo><mi>c</mi></mfrac><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo><mfrac><mo>&lt;</mo><mi>p</mi></mfrac><mi>r</mi><mi>e</mi><mo>&gt;</mo><mo>&lt;</mo><mi>p</mi><mo>&gt;</mo><mi>L</mi><mi>i</mi><mi>k</mi><mi>e</mi><mi>c</mi><mi>s</mi><mi>s</mi><mn>4</mn><mi>s</mi><mi>t</mi><mi>y</mi><mo>&le;</mo><mi>s</mi><mi>h</mi><mi>e</mi><mi>e</mi><mi>t</mi><mi>s</mi><mo>,</mo><mi>t</mi><mi>h</mi><mi>i</mi><mi>s</mi><mi>c</mi><mi>a</mi><mi>n</mi><mi>a</mi><mi>l</mi><mi>s</mi><mi>o</mi><mi>b</mi><mi>e</mi><mi>u</mi><mi>s</mi><mi>e</mi><mi>d</mi><mo>&rarr;</mo><mi>e</mi><mi>x</mi><mi>p</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>s</mi><mi>a</mi><mo>&amp;</mo><mo>#</mo><mn>39</mn><mo>;</mo><mi>c</mi><mi>o</mi><mi>n</mi><mi>t</mi><mi>a</mi><mo>&isin;</mo><mo>&isin;</mo><mrow><mi>g</mi><mo>&amp;</mo></mrow><mo>#</mo><mn>39</mn><mo>;</mo><mi>o</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>a</mi><mo>&rarr;</mo><mi>r</mi><mo>.</mo><mfrac><mo>&lt;</mo><mi>p</mi></mfrac><mo>&gt;</mo><mo>&lt;</mo><mi>p</mi><mi>r</mi><mi>e</mi><mo>&gt;</mo><mo>&lt;</mo><mi>c</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>n</mi><mi>d</mi><mi>e</mi><mrow><mi>f</mi><mo>&isin;</mo></mrow><mi>e</mi><mi>d</mi><mi>j</mi><mi>s</mi><mrow><mtext></mtext></mrow><mi>o</mi><mi>b</mi><mi>o</mi><mi>e</mi><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mfrac><mo>'</mo><mi>m</mi></mfrac><mi>y</mi><mi>a</mi><mi>p</mi><mfrac><mi>p</mi><mi>t</mi></mfrac><mi>h</mi><mo>&isin;</mo><mrow><mi>g</mi><mi>s</mi></mrow><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>)</mo></mrow><mo>.</mo><mi>n</mi><mi>o</mi><mi>d</mi><mi>e</mi><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mi>p</mi><mi>e</mi><mi>o</mi><mi>p</mi><mo>&le;</mo><mo>.</mo></mrow></span></math>*.email'</span>, <span class="keyword">function</span>(personWithAnEmailAddress){

      <span class="comment">// here we'll be called back with baz</span>
      <span class="comment">// and bax but not Boz.</span>

   });</code></pre>
<h2 id="transforming-json-while-it-is-streaming">Transforming JSON while it is streaming</h2>
<p>Say we have the JSON below:</p>
<pre><code class="undefinedjs">[
   {<span class="string">"verb"</span>:<span class="string">"VISIT"</span>, <span class="string">"noun"</span>:<span class="string">"SHOPS"</span>},
   {<span class="string">"verb"</span>:<span class="string">"FIND"</span>, <span class="string">"noun"</span>:<span class="string">"WINE"</span>},
   {<span class="string">"verb"</span>:<span class="string">"MAKE"</span>, <span class="string">"noun"</span>:<span class="string">"PIZZA"</span>}
]</code></pre>
<p>We want to read the JSON but the uppercase is a bit ugly.
Oboe can transform the nodes as they stream:</p>
<pre><code class="undefinedjs">
<span class="function"><span class="keyword">function</span> <span class="title">toLower</span><span class="params">(s)</span>{</span>
   <span class="keyword">return</span> s.toLowerCase();
}

oboe(<span class="string">'words.json'</span>)
   .node(<span class="string">'verb'</span>, toLower)
   .node(<span class="string">'noun'</span>, toLower)
   .node(<span class="string">'!.*'</span>, <span class="keyword">function</span>(pair){

      console.log(<span class="string">'Please'</span>, pair.verb, <span class="string">'me some'</span>, pair.noun);
   });</code></pre>
<p>The code above logs:</p>
<pre><code>Please visit me some shops
Please find me some wine
Please make me some pizza</code></pre>
<h2 id="demarshalling-json-to-an-oop-model">Demarshalling JSON to an OOP model</h2>
<p>If you are programming in an OO style you probably want to instantiate constructors
based on the values you read from the JSON.</p>
<p>You can build the OOP model while streaming using Oboe&#39;s node replacement feature:</p>
<pre><code class="undefinedjs"><span class="function"><span class="keyword">function</span> <span class="title">Person</span><span class="params">(firstName, lastName)</span> {</span>
   <span class="keyword">this</span>.firstName = firstName;
   <span class="keyword">this</span>.lastName = lastName;
}

Person.prototype.getFullName = <span class="keyword">function</span>() {
   <span class="keyword">return</span> <span class="keyword">this</span>.firstName + <span class="string">' '</span> + <span class="keyword">this</span>.lastName;
}

oboe(<span class="string">'/myapp/people'</span>)
   .node(<span class="string">'people.*'</span>, <span class="keyword">function</span>(person){

      <span class="comment">// Any value we return from a node callback will replace</span>
      <span class="comment">// the parsed object:</span>

      <span class="keyword">return</span> <span class="keyword">new</span> Person(person.firstName, person.lastName)
   })
   .done(<span class="keyword">function</span>(model){

      <span class="comment">// We can call the .getFullName() method directly because the</span>
      <span class="comment">// model here contains Person instances, not plain JS objects</span>

      console.log( model.people[<span class="number">1</span>].getFullName() );
   });</code></pre>
<h2 id="loading-json-trees-larger-than-the-available-ram">Loading JSON trees larger than the available RAM</h2>
<p>By default Oboe assembles the full tree of the JSON that it receives.
This means that every node is kept in memory for the duration of the parse.</p>
<p>If you are streaming large resources to avoid memory limitations, you can delete
any detected node by returning <code>oboe.drop</code> from <a href="api#node-event">the node event</a>.</p>
<pre><code class="undefinedjs"><span class="comment">// we are getting this large JSON</span>
{
   <span class="string">"drinks"</span>:[
      {<span class="string">"name"</span>:<span class="string">"Orange juice"</span>, <span class="string">"ingredients"</span>:<span class="string">"Oranges"</span>},
      {<span class="string">"name"</span>:<span class="string">"Wine"</span>, <span class="string">"ingredients"</span>:<span class="string">"Grapes"</span>},
      {<span class="string">"name"</span>:<span class="string">"Coffee"</span>, <span class="string">"ingredients"</span>:<span class="string">"Roasted Beans"</span>}

      <span class="comment">// ... lots more records ...</span>
   ]
}</code></pre>
<pre><code class="undefinedjs">oboe(<span class="string">'drinks.json'</span>)
   .node(<span class="string">'!.*'</span>, <span class="keyword">function</span>(drink){

      <span class="keyword">if</span>( available(drink.ingredients) ) {
         startMaking(drink.name);
      }

      <span class="comment">// By returning oboe.drop, the parsed JSON object will be freed,</span>
      <span class="comment">// allowing it to be garbage collected.</span>
      <span class="keyword">return</span> oboe.drop;

   }).done(<span class="keyword">function</span>( finalJson ){

      <span class="comment">// most of the nodes have been dropped</span>

      console.log( finalJson );  <span class="comment">// logs: {"drinks":[]}</span>
   })</code></pre>
<p>There is also a shorthand form of <code>oboe.drop</code> if you want to drop nodes without examining them first:</p>
<pre><code class="undefinedjs">oboe(<span class="string">'drinks.json'</span>)
   <span class="comment">// we don't care how the drink is made</span>
   .node(<span class="string">'ingredients'</span>, oboe.drop)
   .done(<span class="keyword">function</span>( finalJson ){

      console.log( finalJson.drinks );
      <span class="comment">//  [ {"name":"Orange juice"}, {"name":"Wine"}, {"name":"Coffee"} ]}</span>
   })</code></pre>
<h2 id="streaming-out-html-from-express">Streaming out HTML from express</h2>
<p>Generating a streamed HTML response from a streamed JSON data service.</p>
<pre><code class="undefinedjs">app.get(<span class="string">'/foo'</span>, <span class="keyword">function</span>(req, res){
   <span class="function"><span class="keyword">function</span> <span class="title">writeHtml</span><span class="params">(err, html)</span>{</span>
      res.write(html);
   }

   res.render(<span class="string">'pageheader'</span>, writeHtml);

   oboe( my_stream )
      .node(<span class="string">'items.*'</span>, <span class="keyword">function</span>( item ){
          res.render(<span class="string">'item'</span>, item, writeHtml);
      })
      .done(<span class="keyword">function</span>() {
          res.render(<span class="string">'pagefooter'</span>, writeHtml);
      })
});</code></pre>
<h2 id="using-oboe-with-d3-js">Using Oboe with d3.js</h2>
<p>Oboe works very nicely with <a href="http://d3js.org/">d3.js</a> to add content to
a visualisation while the JSON downloads.</p>
<pre><code class="undefinedjs"><span class="comment">// get a (probably empty) d3 selection:</span>
<span class="keyword">var</span> things = d3.selectAll(<span class="string">'rect.thing'</span>);

<span class="comment">// Start downloading some data.</span>
<span class="comment">// Every time we see a new thing in the data stream, use</span>
<span class="comment">// d3 to add an element to our visualisation. This pattern</span>
<span class="comment">// should work for most d3 based visualistions.</span>
oboe(<span class="string">'/data/things'</span>)
   .node(<span class="string">'<math title="things.*&apos;&lt;/span&gt;, &lt;span class=" keyword"="">function</math></span>( thingsArray ){ things.data(thingsArray) .enter().append(<span class="string">'svg:rect'</span>) .classed(<span class="string">'thing'</span>, <span class="literal">true</span>) .attr(x, <span class="keyword">function</span>(d){ <span class="keyword">return</span> d.x }) .attr(y, <span class="keyword">function</span>(d){ <span class="keyword">return</span> d.x }) .attr(width, <span class="keyword">function</span>(d){ <span class="keyword">return</span> d.w }) .attr(height, <span class="keyword">function</span>(d){ <span class="keyword">return</span> d.h }) <span class="comment">// no need to handle update or exit set here since</span> <span class="comment">// downloading is purely additive</span> });</code></pre> <h2 id="reading-from-node-js-streams">Reading from Node.js streams</h2> <p>Instead of giving <code>oboe</code> a URL you can pass any <a href="http://nodejs.org/api/stream.html#stream_class_stream_readable">ReadableStream</a>. To load from a local file you&#39;d do this:</p> <pre><code class="undefinedjs">oboe( fs.createReadStream( <span class="string">'/home/me/secretPlans.json'</span> ) ) .on(<span class="string">'node'</span>, { <span class="string">'schemes.*'</span>: <span class="keyword">function</span>(scheme){ console.log(<span class="string">'Aha! '</span> + scheme); }, <span class="string">'plottings.*'</span>: <span class="keyword">function</span>(deviousPlot){ console.log(<span class="string">'Hmmm! '</span> + deviousPlot); } }) .on(<span class="string">'done'</span>, <span class="keyword">function</span>(){ console.log(<span class="string">"*twiddles mustache*"</span>); }) .on(<span class="string">'fail'</span>, <span class="keyword">function</span>(){ console.log(<span class="string">"Drat! Foiled again!"</span>); });</code></pre> <p>Because explicit loops are replaced with pattern-based declarations, the code is usually about the same length as with JSON.parse:</p> <pre><code class="undefinedjs">fs.readFile(<span class="string">'/home/me/secretPlans.json'</span>, <span class="keyword">function</span>(err, plansJson){ <span class="keyword">if</span>(err) { console.log(<span class="string">"Drat! Foiled again!"</span>); <span class="keyword">return</span>; } <span class="keyword">var</span> plans = JSON.parse(plansJson); plans.schemes.forEach(<span class="keyword">function</span>(scheme){ console.log(<span class="string">'Aha! '</span> + scheme); }); plans.plottings.forEach(<span class="keyword">function</span>(deviousPlot){ console.log(<span class="string">'Hmmm! '</span> + deviousPlot); }); console.log(<span class="string">"*twiddles mustache*"</span>); });</code></pre> <h2 id="rolling-back-on-error">Rolling back on error</h2> <p><a href="api#fail-event">The fail event</a> notifies when something goes wrong. If you have started putting elements on the page and the connection goes down you have a few options</p> <ul> <li>If the new elements you added are useful without the rest, leave them. For example, in a web-based email client it is more useful to show some messages than none. See <a href="why#demo-mobile-fail-progressive">dropped connections visualisation</a>.</li> <li>If they are useful but you need the rest, make a new request. If the service supports it you need only ask for the missing items.</li> <li>Rollback any half-done changes.</li> </ul> <p>The example below implements rollback.</p> <pre><code class="undefinedjs"><span class="keyword">var</span> currentPersonElement; oboe(<span class="string">'everyone'</span>) .path(<span class="string">'people.*'</span>, <span class="keyword">function</span>(){ <span class="comment">// we don't have the person's details yet but we know we</span> <span class="comment">// found someone in the json stream, we can use this to</span> <span class="comment">// eagerly add them to the page:</span> currentPersonElement ="><mi>t</mi><mi>h</mi><mo>&isin;</mo><mrow><mi>g</mi><mi>s</mi></mrow><mo>.</mo><mo>&sdot;</mo><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>,</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mrow><mi>f</mi><mi>u</mi></mrow><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mrow><mo>(</mo><mi>t</mi><mi>h</mi><mo>&isin;</mo><mrow><mi>g</mi><mi>s</mi></mrow><mi>A</mi><mi>r</mi><mi>r</mi><mi>a</mi><mi>y</mi><mo>)</mo></mrow><mrow><mo>{</mo><mi>t</mi><mi>h</mi><mo>&isin;</mo><mrow><mi>g</mi><mi>s</mi></mrow><mo>.</mo><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi><mrow><mo>(</mo><mi>t</mi><mi>h</mi><mo>&isin;</mo><mrow><mi>g</mi><mi>s</mi></mrow><mi>A</mi><mi>r</mi><mi>r</mi><mi>a</mi><mi>y</mi><mo>)</mo></mrow><mo>.</mo><mi>e</mi><mi>n</mi><mi>t</mi><mi>e</mi><mi>r</mi><mrow><mo>(</mo><mo>)</mo></mrow><mo>.</mo><mi>a</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>n</mi><mi>d</mi><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mi>s</mi><mi>v</mi><mrow><mi>g</mi><mo>:</mo></mrow><mi>r</mi><mi>e</mi><mi>c</mi><mi>t</mi><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>)</mo></mrow><mo>.</mo><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mi>e</mi><mi>d</mi><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mi>t</mi><mi>h</mi><mo>&isin;</mo><mrow><mi>g</mi><mo>'</mo></mrow><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>,</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>i</mi><mi>t</mi><mi>e</mi><mi>r</mi><mi>a</mi><mi>l</mi><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mi>u</mi><mi>e</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>)</mo></mrow><mo>.</mo><mi>a</mi><mstyle fontfamily="monospace"><mi>r</mi></mstyle><mrow><mo>(</mo><mi>x</mi><mo>,</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mrow><mi>f</mi><mi>u</mi></mrow><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mrow><mo>(</mo><mi>d</mi><mo>)</mo></mrow><mrow><mo>{</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mi>r</mi><mi>e</mi><mi>t</mi><mi>u</mi><mi>r</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mi>d</mi><mo>.</mo><mi>x</mi><mo>}</mo></mrow><mo>)</mo></mrow><mo>.</mo><mi>a</mi><mstyle fontfamily="monospace"><mi>r</mi></mstyle><mrow><mo>(</mo><mi>y</mi><mo>,</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mrow><mi>f</mi><mi>u</mi></mrow><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mrow><mo>(</mo><mi>d</mi><mo>)</mo></mrow><mrow><mo>{</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mi>r</mi><mi>e</mi><mi>t</mi><mi>u</mi><mi>r</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mi>d</mi><mo>.</mo><mi>x</mi><mo>}</mo></mrow><mo>)</mo></mrow><mo>.</mo><mi>a</mi><mstyle fontfamily="monospace"><mi>r</mi></mstyle><mrow><mo>(</mo><mi>w</mi><mi>i</mi><mrow><mi>d</mi><mi>t</mi></mrow><mi>h</mi><mo>,</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mrow><mi>f</mi><mi>u</mi></mrow><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mrow><mo>(</mo><mi>d</mi><mo>)</mo></mrow><mrow><mo>{</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mi>r</mi><mi>e</mi><mi>t</mi><mi>u</mi><mi>r</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mi>d</mi><mo>.</mo><mi>w</mi><mo>}</mo></mrow><mo>)</mo></mrow><mo>.</mo><mi>a</mi><mstyle fontfamily="monospace"><mi>r</mi></mstyle><mrow><mo>(</mo><mi>h</mi><mi>e</mi><mi>i</mi><mrow><mi>g</mi><mi>h</mi></mrow><mi>t</mi><mo>,</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mrow><mi>f</mi><mi>u</mi></mrow><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mrow><mo>(</mo><mi>d</mi><mo>)</mo></mrow><mrow><mo>{</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mi>r</mi><mi>e</mi><mi>t</mi><mi>u</mi><mi>r</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mi>d</mi><mo>.</mo><mi>h</mi><mo>}</mo></mrow><mo>)</mo></mrow><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>o</mi><mi>m</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mrow><mtext></mtext></mrow><mo>/</mo><mi>n</mi><mi>o</mi><mo>&ne;</mo><mi>e</mi><mi>d</mi><mo>&rarr;</mo><mi>h</mi><mrow><mspace width="1ex"></mspace><mtext>and</mtext><mspace width="1ex"></mspace></mrow><mo>&le;</mo><mi>u</mi><mi>p</mi><mi>d</mi><mi>a</mi><mi>t</mi><mi>e</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>e</mi><mi>&xi;</mi><mi>t</mi><mi>s</mi><mi>e</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mrow><mo>sin</mo><mi>c</mi></mrow><mi>e</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>o</mi><mi>m</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mrow><mtext></mtext></mrow><mo>/</mo><mi>d</mi><mi>o</mi><mi>w</mi><mi>n</mi><mi>l</mi><mi>o</mi><mi>a</mi><mi>d</mi><mo>&isin;</mo><mrow><mi>g</mi><mi>i</mi></mrow><mi>s</mi><mi>p</mi><mi>u</mi><mi>r</mi><mi>e</mi><mi>l</mi><mi>y</mi><mi>a</mi><mi>d</mi><mi>d</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>v</mi><mi>e</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>}</mo></mrow><mo>)</mo><mo>;</mo><mfrac><mo>&lt;</mo><mi>c</mi></mfrac><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo><mfrac><mo>&lt;</mo><mi>p</mi></mfrac><mi>r</mi><mi>e</mi><mo>&gt;</mo><mo>&lt;</mo><mi>h</mi><mn>2</mn><mi>i</mi><mi>d</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>a</mi><mi>d</mi><mo>&isin;</mo><mrow><mi>g</mi><mo>-</mo></mrow><mstyle mathvariant="fraktur"><mo>o</mo></mstyle><mi>m</mi><mo>-</mo><mi>n</mi><mi>o</mi><mi>d</mi><mi>e</mi><mo>-</mo><mi>j</mi><mi>s</mi><mo>-</mo><mi>s</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>m</mi><mi>s</mi><mrow><mtext></mtext></mrow><mi>R</mi><mi>e</mi><mi>a</mi><mi>d</mi><mo>&isin;</mo><mrow><mi>g</mi><mstyle mathvariant="fraktur"><mo>o</mo></mstyle></mrow><mi>m</mi><mi>N</mi><mi>o</mi><mi>d</mi><mi>e</mi><mo>.</mo><mi>j</mi><mi>s</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>m</mi><mi>s</mi><mfrac><mo>&lt;</mo><mi>h</mi></mfrac><mn>2</mn><mo>&gt;</mo><mo>&lt;</mo><mi>p</mi><mo>&gt;</mo><mi>I</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>o</mi><mrow><mi>f</mi><mrow><mi>g</mi><mi>i</mi></mrow></mrow><mi>v</mi><mo>&isin;</mo><mrow><mi>g</mi><mo>&lt;</mo></mrow><mi>c</mi><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo><mi>o</mi><mi>b</mi><mi>o</mi><mi>e</mi><mfrac><mo>&lt;</mo><mi>c</mi></mfrac><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo><mi>a</mi><mi>U</mi><mi>R</mi><mi>L</mi><mi>y</mi><mi>o</mi><mi>u</mi><mi>c</mi><mi>a</mi><mi>n</mi><mi>p</mi><mi>a</mi><mi>s</mi><mi>s</mi><mi>a</mi><mi>n</mi><mi>y</mi><mo>&lt;</mo><mi>a</mi><mi>h</mi><mi>r</mi><mi>e</mi><mrow><mi>f</mi><mo>=</mo></mrow><mrow><mtext></mtext></mrow><mstyle fontfamily="monospace"><mi>p</mi></mstyle><mo>:</mo><mo>/</mo><mi>n</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>j</mi><mi>s</mi><mo>.</mo><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mfrac><mi>g</mi><mi>a</mi></mfrac><mfrac><mi>&pi;</mi><mi>s</mi></mfrac><mi>t</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>m</mi><mo>.</mo><mi>h</mi><mi>t</mi><mi>m</mi><mi>l</mi><mo>#</mo><mi>s</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>a</mi><msub><mi>m</mi><mi>c</mi></msub><mi>l</mi><mi>a</mi><mi>s</mi><msub><mi>s</mi><mi>s</mi></msub><mi>t</mi><mi>r</mi><mi>e</mi><mi>a</mi><msub><mi>m</mi><mi>r</mi></msub><mi>e</mi><mi>a</mi><mi>d</mi><mi>a</mi><mi>b</mi><mo>&le;</mo><mrow><mtext></mtext></mrow><mi>R</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>a</mi><mi>b</mi><mo>&le;</mo><mi>S</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>m</mi><mfrac><mo>&lt;</mo><mi>a</mi></mfrac><mo>&gt;</mo><mo>.</mo><mi>T</mi><mi>o</mi><mi>l</mi><mi>o</mi><mi>a</mi><mi>d</mi><mstyle mathvariant="fraktur"><mo>o</mo></mstyle><mi>m</mi><mi>a</mi><mi>l</mi><mi>o</mi><mi>c</mi><mi>a</mi><mi>l</mi><mrow><mi>f</mi><mi>i</mi></mrow><mo>&le;</mo><mi>y</mi><mi>o</mi><mi>u</mi><mo>&amp;</mo><mo>#</mo><mn>39</mn><mo>;</mo><mi>d</mi><mi>d</mi><mi>o</mi><mi>t</mi><mi>h</mi><mi>i</mi><mi>s</mi><mo>:</mo><mfrac><mo>&lt;</mo><mi>p</mi></mfrac><mo>&gt;</mo><mo>&lt;</mo><mi>p</mi><mi>r</mi><mi>e</mi><mo>&gt;</mo><mo>&lt;</mo><mi>c</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>n</mi><mi>d</mi><mi>e</mi><mrow><mi>f</mi><mo>&isin;</mo></mrow><mi>e</mi><mi>d</mi><mi>j</mi><mi>s</mi><mrow><mtext></mtext></mrow><mi>o</mi><mi>b</mi><mi>o</mi><mi>e</mi><mrow><mo>(</mo><mrow><mi>f</mi><mi>s</mi></mrow><mo>.</mo><mi>c</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>t</mi><mi>e</mi><mi>R</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>S</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>m</mi><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mfrac><mo>'</mo><mi>h</mi></mfrac><mi>o</mi><mi>m</mi><mfrac><mi>e</mi><mi>m</mi></mfrac><mfrac><mi>e</mi><mrow><mo>sec</mo><mi>r</mi></mrow></mfrac><mi>e</mi><mi>t</mi><mi>P</mi><mi>l</mi><mi>a</mi><mi>n</mi><mi>s</mi><mo>.</mo><mi>j</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>)</mo></mrow><mo>)</mo></mrow><mo>.</mo><mi>o</mi><mi>n</mi><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mi>n</mi><mi>o</mi><mi>d</mi><mi>e</mi><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>,</mo><mrow><mo>{</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mi>s</mi><mi>c</mi><mi>h</mi><mi>e</mi><mi>m</mi><mi>e</mi><mi>s</mi><mo>.</mo><mo>&sdot;</mo><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>:</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mrow><mi>f</mi><mi>u</mi></mrow><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mrow><mo>(</mo><mi>s</mi><mi>c</mi><mi>h</mi><mi>e</mi><mi>m</mi><mi>e</mi><mo>)</mo></mrow><mrow><mo>{</mo><mi>c</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi>o</mi><mo>&le;</mo><mo>.</mo><mrow><mo>log</mo><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mi>A</mi><mi>h</mi><mi>a</mi><mo>!</mo><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>+</mo><mi>s</mi><mi>c</mi><mi>h</mi><mi>e</mi><mi>m</mi><mi>e</mi><mo>)</mo></mrow></mrow><mo>;</mo><mo>}</mo></mrow><mo>,</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mi>p</mi><mi>l</mi><mi>o</mi><mstyle fontfamily="monospace"><mo>&isin;</mo></mstyle><mrow><mi>g</mi><mi>s</mi></mrow><mo>.</mo><mo>&sdot;</mo><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>:</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mrow><mi>f</mi><mi>u</mi></mrow><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mrow><mo>(</mo><mi>d</mi><mi>e</mi><mi>v</mi><mi>i</mi><mi>o</mi><mi>u</mi><mi>s</mi><mi>P</mi><mi>l</mi><mi>o</mi><mi>t</mi><mo>)</mo></mrow><mrow><mo>{</mo><mi>c</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi>o</mi><mo>&le;</mo><mo>.</mo><mrow><mo>log</mo><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mi>H</mi><mi>m</mi><mi>m</mi><mi>m</mi><mo>!</mo><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>+</mo><mi>d</mi><mi>e</mi><mi>v</mi><mi>i</mi><mi>o</mi><mi>u</mi><mi>s</mi><mi>P</mi><mi>l</mi><mi>o</mi><mi>t</mi><mo>)</mo></mrow></mrow><mo>;</mo><mo>}</mo></mrow><mo>}</mo></mrow><mo>)</mo></mrow><mo>.</mo><mi>o</mi><mi>n</mi><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mi>d</mi><mi>o</mi><mo>&ne;</mo><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>,</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mrow><mi>f</mi><mi>u</mi></mrow><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mrow><mo>(</mo><mo>)</mo></mrow><mrow><mo>{</mo><mi>c</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi>o</mi><mo>&le;</mo><mo>.</mo><mrow><mo>log</mo><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mrow><mtext></mtext></mrow><mi>t</mi><mi>w</mi><mi>i</mi><mi>d</mi><mi>d</mi><mo>&le;</mo><mi>s</mi><mi>&mu;</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>c</mi><mi>h</mi><mi>e</mi><mo>&sdot;</mo><mfrac><mrow><mtext></mtext></mrow><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>)</mo></mrow></mrow><mo>;</mo><mo>}</mo></mrow><mo>)</mo></mrow><mo>.</mo><mi>o</mi><mi>n</mi><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mrow><mi>f</mi><mi>a</mi></mrow><mi>i</mi><mi>l</mi><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>,</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mrow><mi>f</mi><mi>u</mi></mrow><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mrow><mo>(</mo><mo>)</mo></mrow><mrow><mo>{</mo><mi>c</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi>o</mi><mo>&le;</mo><mo>.</mo><mrow><mo>log</mo><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mrow><mtext></mtext></mrow><mi>r</mi><mi>a</mi><mi>t</mi><mo>!</mo><mi>F</mi><mi>o</mi><mi>i</mi><mo>&le;</mo><mi>d</mi><mi>a</mi><mrow><mi>g</mi><mi>a</mi></mrow><mo>&isin;</mo><mo>!</mo><mfrac><mrow><mtext></mtext></mrow><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>)</mo></mrow></mrow><mo>;</mo><mo>}</mo></mrow><mo>)</mo></mrow><mo>;</mo><mfrac><mo>&lt;</mo><mi>c</mi></mfrac><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo><mfrac><mo>&lt;</mo><mi>p</mi></mfrac><mi>r</mi><mi>e</mi><mo>&gt;</mo><mo>&lt;</mo><mi>p</mi><mo>&gt;</mo><mi>B</mi><mi>e</mi><mi>c</mi><mi>a</mi><mi>u</mi><mi>s</mi><mi>e</mi><mi>e</mi><mi>x</mi><mi>p</mi><mi>l</mi><mi>i</mi><mi>c</mi><mi>i</mi><mi>t</mi><mi>l</mi><mo>&infin;</mo><mi>p</mi><mi>s</mi><mi>a</mi><mi>r</mi><mi>e</mi><mi>r</mi><mi>e</mi><mi>p</mi><mi>l</mi><mi>a</mi><mi>c</mi><mi>e</mi><mi>d</mi><mi>w</mi><mi>i</mi><mi>t</mi><mi>h</mi><mi>p</mi><mi>a</mi><mstyle fontfamily="monospace"><mi>e</mi></mstyle><mi>r</mi><mi>n</mi><mo>-</mo><mi>b</mi><mi>a</mi><mi>s</mi><mi>e</mi><mi>d</mi><mi>d</mi><mi>e</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>r</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi><mo>,</mo><mi>t</mi><mi>h</mi><mi>e</mi><mi>c</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>i</mi><mi>s</mi><mi>u</mi><mi>s</mi><mi>u</mi><mi>a</mi><mi>l</mi><mi>l</mi><mi>y</mi><mi>a</mi><mi>b</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>s</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo>&le;</mo><mi>n</mi><mrow><mi>g</mi><mi>t</mi></mrow><mi>h</mi><mi>a</mi><mi>s</mi><mi>w</mi><mi>i</mi><mi>t</mi><mi>h</mi><mi>J</mi><mi>S</mi><mi>O</mi><mi>N</mi><mo>.</mo><mi>p</mi><mi>a</mi><mi>r</mi><mi>s</mi><mi>e</mi><mo>:</mo><mfrac><mo>&lt;</mo><mi>p</mi></mfrac><mo>&gt;</mo><mo>&lt;</mo><mi>p</mi><mi>r</mi><mi>e</mi><mo>&gt;</mo><mo>&lt;</mo><mi>c</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>n</mi><mi>d</mi><mi>e</mi><mrow><mi>f</mi><mo>&isin;</mo></mrow><mi>e</mi><mi>d</mi><mi>j</mi><mi>s</mi><mrow><mtext></mtext></mrow><mrow><mi>f</mi><mi>s</mi></mrow><mo>.</mo><mi>r</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>F</mi><mi>i</mi><mo>&le;</mo><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mfrac><mo>'</mo><mi>h</mi></mfrac><mi>o</mi><mi>m</mi><mfrac><mi>e</mi><mi>m</mi></mfrac><mfrac><mi>e</mi><mrow><mo>sec</mo><mi>r</mi></mrow></mfrac><mi>e</mi><mi>t</mi><mi>P</mi><mi>l</mi><mi>a</mi><mi>n</mi><mi>s</mi><mo>.</mo><mi>j</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>,</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mrow><mi>f</mi><mi>u</mi></mrow><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mrow><mo>(</mo><mi>e</mi><mi>r</mi><mi>r</mi><mo>,</mo><mi>p</mi><mi>l</mi><mi>a</mi><mi>n</mi><mi>s</mi><mi>J</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>)</mo></mrow><mrow><mo>{</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mrow><mspace width="1ex"></mspace><mo>if</mo><mspace width="1ex"></mspace></mrow><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mrow><mo>(</mo><mi>e</mi><mi>r</mi><mi>r</mi><mo>)</mo></mrow><mrow><mo>{</mo><mi>c</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi>o</mi><mo>&le;</mo><mo>.</mo><mrow><mo>log</mo><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mrow><mtext></mtext></mrow><mi>r</mi><mi>a</mi><mi>t</mi><mo>!</mo><mi>F</mi><mi>o</mi><mi>i</mi><mo>&le;</mo><mi>d</mi><mi>a</mi><mrow><mi>g</mi><mi>a</mi></mrow><mo>&isin;</mo><mo>!</mo><mfrac><mrow><mtext></mtext></mrow><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>)</mo></mrow></mrow><mo>;</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mi>r</mi><mi>e</mi><mi>t</mi><mi>u</mi><mi>r</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>;</mo><mo>}</mo></mrow><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mi>v</mi><mi>a</mi><mi>r</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mi>p</mi><mi>l</mi><mi>a</mi><mi>n</mi><mi>s</mi><mo>=</mo><mi>J</mi><mi>S</mi><mi>O</mi><mi>N</mi><mo>.</mo><mi>p</mi><mi>a</mi><mi>r</mi><mi>s</mi><mi>e</mi><mrow><mo>(</mo><mi>p</mi><mi>l</mi><mi>a</mi><mi>n</mi><mi>s</mi><mi>J</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>)</mo></mrow><mo>;</mo><mi>p</mi><mi>l</mi><mi>a</mi><mi>n</mi><mi>s</mi><mo>.</mo><mi>s</mi><mi>c</mi><mi>h</mi><mi>e</mi><mi>m</mi><mi>e</mi><mi>s</mi><mo>.</mo><mrow><mi>f</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow></mrow><mi>E</mi><mi>a</mi><mi>c</mi><mi>h</mi><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mrow><mi>f</mi><mi>u</mi></mrow><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mrow><mo>(</mo><mi>s</mi><mi>c</mi><mi>h</mi><mi>e</mi><mi>m</mi><mi>e</mi><mo>)</mo></mrow><mrow><mo>{</mo><mi>c</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi>o</mi><mo>&le;</mo><mo>.</mo><mrow><mo>log</mo><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mi>A</mi><mi>h</mi><mi>a</mi><mo>!</mo><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>+</mo><mi>s</mi><mi>c</mi><mi>h</mi><mi>e</mi><mi>m</mi><mi>e</mi><mo>)</mo></mrow></mrow><mo>;</mo><mo>}</mo></mrow><mo>)</mo></mrow><mo>;</mo><mi>p</mi><mi>l</mi><mi>a</mi><mi>n</mi><mi>s</mi><mo>.</mo><mi>p</mi><mi>l</mi><mi>o</mi><mstyle fontfamily="monospace"><mo>&isin;</mo></mstyle><mrow><mi>g</mi><mi>s</mi></mrow><mo>.</mo><mrow><mi>f</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow></mrow><mi>E</mi><mi>a</mi><mi>c</mi><mi>h</mi><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mrow><mi>f</mi><mi>u</mi></mrow><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mrow><mo>(</mo><mi>d</mi><mi>e</mi><mi>v</mi><mi>i</mi><mi>o</mi><mi>u</mi><mi>s</mi><mi>P</mi><mi>l</mi><mi>o</mi><mi>t</mi><mo>)</mo></mrow><mrow><mo>{</mo><mi>c</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi>o</mi><mo>&le;</mo><mo>.</mo><mrow><mo>log</mo><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mi>H</mi><mi>m</mi><mi>m</mi><mi>m</mi><mo>!</mo><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>+</mo><mi>d</mi><mi>e</mi><mi>v</mi><mi>i</mi><mi>o</mi><mi>u</mi><mi>s</mi><mi>P</mi><mi>l</mi><mi>o</mi><mi>t</mi><mo>)</mo></mrow></mrow><mo>;</mo><mo>}</mo></mrow><mo>)</mo></mrow><mo>;</mo><mi>c</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi>o</mi><mo>&le;</mo><mo>.</mo><mrow><mo>log</mo><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mrow><mtext></mtext></mrow><mi>t</mi><mi>w</mi><mi>i</mi><mi>d</mi><mi>d</mi><mo>&le;</mo><mi>s</mi><mi>&mu;</mi><mi>s</mi><mi>t</mi><mi>a</mi><mi>c</mi><mi>h</mi><mi>e</mi><mo>&sdot;</mo><mfrac><mrow><mtext></mtext></mrow><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>)</mo></mrow></mrow><mo>;</mo><mo>}</mo></mrow><mo>)</mo></mrow><mo>;</mo><mfrac><mo>&lt;</mo><mi>c</mi></mfrac><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo><mfrac><mo>&lt;</mo><mi>p</mi></mfrac><mi>r</mi><mi>e</mi><mo>&gt;</mo><mo>&lt;</mo><mi>h</mi><mn>2</mn><mi>i</mi><mi>d</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>o</mi><mi>l</mi><mi>l</mi><mo>&isin;</mo><mrow><mi>g</mi><mo>-</mo></mrow><mi>b</mi><mi>a</mi><mi>c</mi><mi>k</mi><mo>-</mo><mi>o</mi><mi>n</mi><mo>-</mo><mi>e</mi><mi>r</mi><mi>r</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mrow><mtext></mtext></mrow><mi>R</mi><mi>o</mi><mi>l</mi><mi>l</mi><mo>&isin;</mo><mrow><mi>g</mi><mi>b</mi></mrow><mi>a</mi><mi>c</mi><mi>k</mi><mi>o</mi><mi>n</mi><mi>e</mi><mi>r</mi><mi>r</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mfrac><mo>&lt;</mo><mi>h</mi></mfrac><mn>2</mn><mo>&gt;</mo><mo>&lt;</mo><mi>p</mi><mo>&gt;</mo><mo>&lt;</mo><mi>a</mi><mi>h</mi><mi>r</mi><mi>e</mi><mrow><mi>f</mi><mo>=</mo></mrow><mrow><mtext></mtext></mrow><mi>&pi;</mi><mo>#</mo><mrow><mi>f</mi><mi>a</mi></mrow><mi>i</mi><mi>l</mi><mo>-</mo><mi>e</mi><mi>v</mi><mi>e</mi><mi>n</mi><mi>t</mi><mrow><mtext></mtext></mrow><mi>T</mi><mi>h</mi><mi>e</mi><mrow><mi>f</mi><mi>a</mi></mrow><mi>i</mi><mi>l</mi><mi>e</mi><mi>v</mi><mi>e</mi><mi>n</mi><mi>t</mi><mfrac><mo>&lt;</mo><mi>a</mi></mfrac><mo>&gt;</mo><mo>&not;</mo><mrow><mspace width="1ex"></mspace><mo>if</mo><mspace width="1ex"></mspace></mrow><mi>i</mi><mi>e</mi><mi>s</mi><mi>w</mi><mi>h</mi><mi>e</mi><mi>n</mi><mi>s</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi>t</mi><mi>h</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mi>g</mi><mi>o</mi></mrow></mrow><mi>e</mi><mi>s</mi><mi>w</mi><mi>r</mi><mi>o</mi><mi>n</mi><mrow><mi>g</mi><mo>.</mo></mrow><mi>I</mi><mrow><mi>f</mi><mi>y</mi></mrow><mi>o</mi><mi>u</mi><mi>h</mi><mi>a</mi><mi>v</mi><mi>e</mi><mo>&#8902;</mo><mi>t</mi><mi>e</mi><mi>d</mi><mi>p</mi><mi>u</mi><mstyle fontfamily="monospace"><mo>&isin;</mo></mstyle><mrow><mi>g</mi><mi>e</mi></mrow><mo>&le;</mo><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>s</mi><mi>o</mi><mi>n</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>p</mi><mi>a</mi><mo>&ge;</mo><mrow><mspace width="1ex"></mspace><mtext>and</mtext><mspace width="1ex"></mspace></mrow><mi>t</mi><mi>h</mi><mi>e</mi><mi>c</mi><mi>o</mi><mo>&cap;</mo><mi>e</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mrow><mi>g</mi><mi>o</mi></mrow><mi>e</mi><mi>s</mi><mi>d</mi><mi>o</mi><mi>w</mi><mi>n</mi><mi>y</mi><mi>o</mi><mi>u</mi><mi>h</mi><mi>a</mi><mi>v</mi><mi>e</mi><mi>a</mi><mrow><mi>f</mi><mi>e</mi></mrow><mi>w</mi><mi>o</mi><mi>p</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi><mfrac><mo>&lt;</mo><mi>p</mi></mfrac><mo>&gt;</mo><mo>&lt;</mo><munder><mo>&gt;</mo><mo>&#818;</mo></munder><mo>&lt;</mo><mi>l</mi><mi>i</mi><mo>&gt;</mo><mi>I</mi><mrow><mi>f</mi><mi>t</mi></mrow><mi>h</mi><mi>e</mi><mo>&ne;</mo><mi>w</mi><mi>e</mi><mo>&le;</mo><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>s</mi><mi>y</mi><mi>o</mi><mi>u</mi><mi>a</mi><mi>d</mi><mi>d</mi><mi>e</mi><mi>d</mi><mi>a</mi><mi>r</mi><mi>e</mi><mi>u</mi><mi>s</mi><mi>e</mi><mrow><mi>f</mi><munder><mi>w</mi><mo>&#818;</mo></munder></mrow><mi>i</mi><mi>t</mi><mi>h</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>t</mi><mo>,</mo><mo>&le;</mo><mi>a</mi><mi>v</mi><mi>e</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>m</mi><mo>.</mo><mi>F</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>e</mi><mi>x</mi><mi>a</mi><mi>m</mi><mi>p</mi><mo>&le;</mo><mo>,</mo><mo>&isin;</mo><mi>a</mi><mi>w</mi><mi>e</mi><mi>b</mi><mo>-</mo><mi>b</mi><mi>a</mi><mi>s</mi><mi>e</mi><mi>d</mi><mi>e</mi><mi>m</mi><mi>a</mi><mi>i</mi><mi>l</mi><mi>c</mi><mi>l</mi><mi>i</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>s</mi><mi>m</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>e</mi><mi>u</mi><mi>s</mi><mi>e</mi><mrow><mi>f</mi><munder><mo>&rarr;</mo><mo>&#818;</mo></munder></mrow><mi>s</mi><mi>h</mi><mi>o</mi><mi>w</mi><mi>s</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi>m</mi><mi>e</mi><mi>s</mi><mi>s</mi><mi>a</mi><mo>&ge;</mo><mi>s</mi><mi>t</mi><mi>h</mi><mi>a</mi><mi>n</mi><mi>n</mi><mi>o</mi><mo>&ne;</mo><mo>.</mo><mi>S</mi><mi>e</mi><mi>e</mi><mo>&lt;</mo><mi>a</mi><mi>h</mi><mi>r</mi><mi>e</mi><mrow><mi>f</mi><mo>=</mo></mrow><mrow><mtext></mtext></mrow><mi>h</mi><mi>y</mi><mo>#</mo><mi>d</mi><mi>e</mi><mi>m</mi><mi>o</mi><mo>-</mo><mi>m</mi><mi>o</mi><mi>b</mi><mi>i</mi><mo>&le;</mo><mo>-</mo><mrow><mi>f</mi><mi>a</mi></mrow><mi>i</mi><mi>l</mi><mo>-</mo><mi>p</mi><mi>r</mi><mi>o</mi><mrow><mi>g</mi><mi>r</mi></mrow><mi>e</mi><mi>s</mi><mi>s</mi><mi>i</mi><mi>v</mi><mi>e</mi><mrow><mtext></mtext></mrow><mi>d</mi><mi>r</mi><mi>o</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>d</mi><mi>c</mi><mi>o</mi><mo>&cap;</mo><mi>e</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi>v</mi><mi>i</mi><mi>s</mi><mi>u</mi><mi>a</mi><mi>l</mi><mi>i</mi><mi>s</mi><mi>a</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>a</mi></mfrac><mo>&gt;</mo><mo>.</mo><mfrac><mo>&lt;</mo><mi>l</mi></mfrac><mi>i</mi><mo>&gt;</mo><mo>&lt;</mo><mi>l</mi><mi>i</mi><mo>&gt;</mo><mi>I</mi><mrow><mi>f</mi><mi>t</mi></mrow><mi>h</mi><mi>e</mi><mi>y</mi><mi>a</mi><mi>r</mi><mi>e</mi><mi>u</mi><mi>s</mi><mi>e</mi><mrow><mi>f</mi><munder><mi>b</mi><mo>&#818;</mo></munder></mrow><mi>u</mi><mi>t</mi><mi>y</mi><mi>o</mi><mi>u</mi><mo>&ne;</mo><mi>e</mi><mi>d</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>t</mi><mo>,</mo><mi>m</mi><mi>a</mi><mi>k</mi><mi>e</mi><mi>a</mi><mo>&ne;</mo><mi>w</mi><mi>r</mi><mi>e</mi><mi>q</mi><mi>u</mi><mi>e</mi><mi>s</mi><mi>t</mi><mo>.</mo><mi>I</mi><mrow><mi>f</mi><mi>t</mi></mrow><mi>h</mi><mi>e</mi><mi>s</mi><mi>e</mi><mi>r</mi><mi>v</mi><mi>i</mi><mi>c</mi><mi>e</mi><mo>&sup;</mo><mi>p</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>t</mi><mi>s</mi><mi>i</mi><mi>t</mi><mi>y</mi><mi>o</mi><mi>u</mi><mo>&ne;</mo><mi>e</mi><mi>d</mi><mi>o</mi><mi>n</mi><mi>l</mi><mi>y</mi><mi>a</mi><mi>s</mi><mi>k</mi><mrow><mi>f</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow></mrow><mi>t</mi><mi>h</mi><mi>e</mi><mi>m</mi><mi>i</mi><mi>s</mi><mrow><mo>sin</mo><mrow><mi>g</mi><mi>i</mi></mrow></mrow><mi>t</mi><mi>e</mi><mi>m</mi><mi>s</mi><mo>.</mo><mfrac><mo>&lt;</mo><mi>l</mi></mfrac><mi>i</mi><mo>&gt;</mo><mo>&lt;</mo><mi>l</mi><mi>i</mi><mo>&gt;</mo><mi>R</mi><mi>o</mi><mi>l</mi><mi>l</mi><mi>b</mi><mi>a</mi><mi>c</mi><mi>k</mi><mi>a</mi><mi>n</mi><mi>y</mi><mi>h</mi><mi>a</mi><mi>l</mi><mrow><mi>f</mi><mo>-</mo></mrow><mi>d</mi><mi>o</mi><mo>&ne;</mo><mi>c</mi><mi>h</mi><mi>a</mi><mi>n</mi><mo>&ge;</mo><mi>s</mi><mo>.</mo><mfrac><mo>&lt;</mo><mi>l</mi></mfrac><mi>i</mi><mo>&gt;</mo><mfrac><mo>&lt;</mo><munder><mo>&gt;</mo><mo>&#818;</mo></munder></mfrac><mo>&lt;</mo><mi>p</mi><mo>&gt;</mo><mi>T</mi><mi>h</mi><mi>e</mi><mi>e</mi><mi>x</mi><mi>a</mi><mi>m</mi><mi>p</mi><mo>&le;</mo><mi>b</mi><mi>e</mi><mi>l</mi><mi>o</mi><mi>w</mi><mi>i</mi><mi>m</mi><mi>p</mi><mo>&le;</mo><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>s</mi><mi>r</mi><mi>o</mi><mi>l</mi><mi>l</mi><mi>b</mi><mi>a</mi><mi>c</mi><mi>k</mi><mo>.</mo><mfrac><mo>&lt;</mo><mi>p</mi></mfrac><mo>&gt;</mo><mo>&lt;</mo><mi>p</mi><mi>r</mi><mi>e</mi><mo>&gt;</mo><mo>&lt;</mo><mi>c</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>n</mi><mi>d</mi><mi>e</mi><mrow><mi>f</mi><mo>&isin;</mo></mrow><mi>e</mi><mi>d</mi><mi>j</mi><mi>s</mi><mrow><mtext></mtext></mrow><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mi>v</mi><mi>a</mi><mi>r</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mi>c</mi><mi>u</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>P</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mi>E</mi><mo>&le;</mo><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo>;</mo><mi>o</mi><mi>b</mi><mi>o</mi><mi>e</mi><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mi>e</mi><mi>v</mi><mi>e</mi><mi>r</mi><mi>y</mi><mi>o</mi><mo>&ne;</mo><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>)</mo></mrow><mo>.</mo><mi>p</mi><mi>a</mi><mi>t</mi><mi>h</mi><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mi>p</mi><mi>e</mi><mi>o</mi><mi>p</mi><mo>&le;</mo><mo>.</mo><mo>&sdot;</mo><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>,</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mrow><mi>f</mi><mi>u</mi></mrow><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mrow><mo>(</mo><mo>)</mo></mrow><mrow><mo>{</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>o</mi><mi>m</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mrow><mtext></mtext></mrow><mo>/</mo><mi>w</mi><mi>e</mi><mi>d</mi><mi>o</mi><mi>n</mi><mo>'</mo><mi>t</mi><mi>h</mi><mi>a</mi><mi>v</mi><mi>e</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>'</mo><mi>s</mi><mrow><mo>det</mo><mi>a</mi></mrow><mi>i</mi><mi>l</mi><mi>s</mi><mi>y</mi><mi>e</mi><mi>t</mi><mi>b</mi><mi>u</mi><mi>t</mi><mi>w</mi><mi>e</mi><mi>k</mi><mi>n</mi><mi>o</mi><mi>w</mi><mi>w</mi><mi>e</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>o</mi><mi>m</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mrow><mtext></mtext></mrow><mo>/</mo><mrow><mi>f</mi><mi>o</mi></mrow><mi>u</mi><mi>n</mi><mi>d</mi><mi>s</mi><mi>o</mi><mi>m</mi><mi>e</mi><mi>o</mi><mo>&ne;</mo><mo>&isin;</mo><mi>t</mi><mi>h</mi><mi>e</mi><mi>j</mi><mi>s</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>m</mi><mo>,</mo><mi>w</mi><mi>e</mi><mi>c</mi><mi>a</mi><mi>n</mi><mi>u</mi><mi>s</mi><mi>e</mi><mi>t</mi><mi>h</mi><mi>i</mi><mi>s</mi><mo>&rarr;</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>o</mi><mi>m</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mrow><mtext></mtext></mrow><mo>/</mo><mi>e</mi><mi>a</mi><mo>&ge;</mo><mi>r</mi><mi>l</mi><mi>y</mi><mi>a</mi><mi>d</mi><mi>d</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>m</mi><mo>&rarr;</mo><mi>t</mi><mi>h</mi><mi>e</mi><mi>p</mi><mi>a</mi><mo>&ge;</mo><mo>:</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mi>c</mi><mi>u</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>P</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mi>E</mi><mo>&le;</mo><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo>=</mo></mrow></mrow>(<span class="string">'&lt;div class="person"&gt;'</span>);
      <math title="(&lt;span class=" string"="">'#people').append(currentPersonElement); }) .node(<span class="string">'people.*.name'</span>, <span class="keyword">function</span>( name ){ <span class="comment">// we just found out that person's name, lets add it to</span> <span class="comment">// their div:</span> <span class="keyword">var</span> markup = <span class="string">'<span class="name">'</span> + name + <span class="string">'</span>'</span>; currentPersonElement.append(markup); }) .fail(<span class="keyword">function</span>(){ <span class="keyword">if</span>( currentPersonElement ) { <span class="comment">// oops, that didn't go so well. instead of leaving</span> <span class="comment">// this dude half on the page, remove them altogether</span> currentPersonElement.remove(); } })</math></code></pre> <h2 id="example-patterns">Example patterns</h2> <p>| Pattern | Meaning | |------------------------- |--------------| | <code>*</code> | Every object, string, number etc found in the json stream | <code>!</code> | The root object. Fired when the whole response is available, like JSON.parse() | <code>!.foods.colour</code> | The colours of the foods | <code>person.emails[1]</code> | The first element in the email array for each person | <code>{name email}</code> | Any object with a name and an email property, regardless of where it is in the document | <code>person.emails[*]</code> | Any element in the email array for each person | <code>person."><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mo>#</mo><mi>p</mi><mi>e</mi><mi>o</mi><mi>p</mi><mo>&le;</mo><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>)</mo></mrow><mo>.</mo><mi>a</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>n</mi><mi>d</mi><mrow><mo>(</mo><mi>c</mi><mi>u</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>P</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mi>E</mi><mo>&le;</mo><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo>)</mo></mrow><mo>;</mo><mo>}</mo><mo>)</mo><mo>.</mo><mi>n</mi><mi>o</mi><mi>d</mi><mi>e</mi><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mi>p</mi><mi>e</mi><mi>o</mi><mi>p</mi><mo>&le;</mo><mo>.</mo><mo>&sdot;</mo><mo>.</mo><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>,</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mrow><mi>f</mi><mi>u</mi></mrow><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mrow><mo>(</mo><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo>)</mo></mrow><mrow><mo>{</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>o</mi><mi>m</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mrow><mtext></mtext></mrow><mo>/</mo><mi>w</mi><mi>e</mi><mi>j</mi><mi>u</mi><mi>s</mi><mi>t</mi><mrow><mi>f</mi><mi>o</mi></mrow><mi>u</mi><mi>n</mi><mi>d</mi><mi>o</mi><mi>u</mi><mi>t</mi><mi>t</mi><mover><mi>p</mi><mo>^</mo></mover><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>'</mo><mi>s</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo>,</mo><mo>&le;</mo><mi>t</mi><mi>s</mi><mi>a</mi><mi>d</mi><mi>d</mi><mi>i</mi><mi>t</mi><mo>&rarr;</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>o</mi><mi>m</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mrow><mtext></mtext></mrow><mo>/</mo><mi>t</mi><mi>h</mi><mi>e</mi><mi>i</mi><mi>r</mi><mi>d</mi><mi>i</mi><mi>v</mi><mo>:</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mi>v</mi><mi>a</mi><mi>r</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mi>m</mi><mi>a</mi><mi>r</mi><mi>k</mi><mi>u</mi><mi>p</mi><mo>=</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>a</mi><mi>m</mi><mi>e</mi><mrow><mtext></mtext></mrow><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>+</mo><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mo>+</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>t</mi><mi>r</mi><mo>&isin;</mo><mrow><mi>g</mi><mrow><mtext></mtext></mrow></mrow><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>'</mo><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>;</mo><mi>c</mi><mi>u</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>P</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mi>E</mi><mo>&le;</mo><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo>.</mo><mi>a</mi><mi>p</mi><mi>p</mi><mi>e</mi><mi>n</mi><mi>d</mi><mrow><mo>(</mo><mi>m</mi><mi>a</mi><mi>r</mi><mi>k</mi><mi>u</mi><mi>p</mi><mo>)</mo></mrow><mo>;</mo><mo>}</mo></mrow><mo>)</mo></mrow><mo>.</mo><mrow><mi>f</mi><mi>a</mi></mrow><mi>i</mi><mi>l</mi><mrow><mo>(</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mrow><mi>f</mi><mi>u</mi></mrow><mi>n</mi><mi>c</mi><mi>t</mi><mi>i</mi><mi>o</mi><mi>n</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mrow><mo>(</mo><mo>)</mo></mrow><mrow><mo>{</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>e</mi><mi>y</mi><mi>w</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow><mi>d</mi><mrow><mtext></mtext></mrow><mrow><mspace width="1ex"></mspace><mo>if</mo><mspace width="1ex"></mspace></mrow><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mrow><mo>(</mo><mi>c</mi><mi>u</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>P</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mi>E</mi><mo>&le;</mo><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo>)</mo></mrow><mrow><mo>{</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>o</mi><mi>m</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mrow><mtext></mtext></mrow><mo>/</mo><mo>&infin;</mo><mi>p</mi><mi>s</mi><mo>,</mo><mi>t</mi><mover><mi>d</mi><mo>^</mo></mover><mi>i</mi><mi>d</mi><mi>n</mi><mo>'</mo><mi>t</mi><mrow><mi>g</mi><mi>o</mi></mrow><mi>s</mi><mi>o</mi><mi>w</mi><mi>e</mi><mi>l</mi><mi>l</mi><mo>.</mo><mo>&isin;</mo><mi>s</mi><mi>t</mi><mi>e</mi><mi>a</mi><mi>d</mi><mi>o</mi><mrow><mi>f</mi><mo>&le;</mo></mrow><mi>a</mi><mi>v</mi><mo>&isin;</mo><mfrac><mrow><mi>g</mi><mo>&lt;</mo></mrow><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mo>&lt;</mo><mi>s</mi><mi>p</mi><mi>a</mi><mi>n</mi><mi>c</mi><mi>l</mi><mi>a</mi><mi>s</mi><mi>s</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>o</mi><mi>m</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mrow><mtext></mtext></mrow><mo>/</mo><mi>t</mi><mi>h</mi><mi>i</mi><mi>s</mi><mi>d</mi><mi>u</mi><mi>d</mi><mi>e</mi><mi>h</mi><mi>a</mi><mi>l</mi><mrow><mi>f</mi><mi>o</mi></mrow><mi>n</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>p</mi><mi>a</mi><mo>&ge;</mo><mo>,</mo><mi>r</mi><mi>e</mi><mi>m</mi><mi>o</mi><mi>v</mi><mi>e</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>m</mi><mi>a</mi><mo>&lt;</mo><mi>o</mi><mo>&ge;</mo><mi>t</mi><mi>h</mi><mi>e</mi><mi>r</mi><mfrac><mo>&lt;</mo><mi>s</mi></mfrac><mi>p</mi><mi>a</mi><mi>n</mi><mo>&gt;</mo><mi>c</mi><mi>u</mi><mi>r</mi><mi>r</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>P</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mi>E</mi><mo>&le;</mo><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo>.</mo><mi>r</mi><mi>e</mi><mi>m</mi><mi>o</mi><mi>v</mi><mi>e</mi><mrow><mo>(</mo><mo>)</mo></mrow><mo>;</mo><mo>}</mo></mrow><mo>}</mo></mrow><mo>)</mo></mrow><mfrac><mo>&lt;</mo><mi>c</mi></mfrac><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo><mfrac><mo>&lt;</mo><mi>p</mi></mfrac><mi>r</mi><mi>e</mi><mo>&gt;</mo><mo>&lt;</mo><mi>h</mi><mn>2</mn><mi>i</mi><mi>d</mi><mo>=</mo><mrow><mtext></mtext></mrow><mi>x</mi><mi>a</mi><mi>m</mi><mi>p</mi><mo>&le;</mo><mo>-</mo><mi>p</mi><mi>a</mi><mstyle fontfamily="monospace"><mi>e</mi></mstyle><mi>r</mi><mi>n</mi><mi>s</mi><mrow><mtext></mtext></mrow><mi>E</mi><mi>x</mi><mi>a</mi><mi>m</mi><mi>p</mi><mo>&le;</mo><mi>p</mi><mi>a</mi><mstyle fontfamily="monospace"><mi>e</mi></mstyle><mi>r</mi><mi>n</mi><mi>s</mi><mfrac><mo>&lt;</mo><mi>h</mi></mfrac><mn>2</mn><mo>&gt;</mo><mo>&lt;</mo><mi>p</mi><mo>&gt;</mo><mrow><mo>|</mo><mi>P</mi><mi>a</mi><mstyle fontfamily="monospace"><mi>e</mi></mstyle><mi>r</mi><mi>n</mi><mo>|</mo></mrow><mi>M</mi><mi>e</mi><mi>a</mi><mi>n</mi><mo>&isin;</mo><mi>g</mi><mrow><mo>|</mo><mo>&#8866;</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>&#8866;</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>-</mo><mo>|</mo></mrow><mrow><mo>|</mo><mo>&lt;</mo><mi>c</mi><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo><mo>&sdot;</mo><mfrac><mo>&lt;</mo><mi>c</mi></mfrac><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo><mo>|</mo></mrow><mi>E</mi><mi>v</mi><mi>e</mi><mi>r</mi><mi>y</mi><mi>o</mi><mi>b</mi><mi>j</mi><mi>e</mi><mi>c</mi><mi>t</mi><mo>,</mo><mi>s</mi><mi>t</mi><mi>r</mi><mo>&isin;</mo><mi>g</mi><mo>,</mo><mi>&nu;</mi><mi>m</mi><mi>b</mi><mi>e</mi><mi>r</mi><mi>e</mi><mi>t</mi><mi>c</mi><mrow><mi>f</mi><mi>o</mi></mrow><mi>u</mi><mi>n</mi><mi>d</mi><mo>&isin;</mo><mi>t</mi><mi>h</mi><mi>e</mi><mi>j</mi><mi>s</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>m</mi><mrow><mo>|</mo><mo>&lt;</mo><mi>c</mi><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo><mo>!</mo><mfrac><mo>&lt;</mo><mi>c</mi></mfrac><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo><mo>|</mo></mrow><mi>T</mi><mi>h</mi><mi>e</mi><mroot><mi>b</mi><mi>o</mi></mroot><mi>j</mi><mi>e</mi><mi>c</mi><mi>t</mi><mo>.</mo><mi>F</mi><mi>i</mi><mi>r</mi><mi>e</mi><mi>d</mi><mi>w</mi><mi>h</mi><mi>e</mi><mi>n</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>w</mi><mi>h</mi><mi>o</mi><mo>&le;</mo><mi>r</mi><mi>e</mi><mi>s</mi><mi>p</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi>e</mi><mi>i</mi><mi>s</mi><mi>a</mi><mi>v</mi><mi>a</mi><mi>i</mi><mi>l</mi><mi>a</mi><mi>b</mi><mo>&le;</mo><mo>,</mo><mi>l</mi><mi>i</mi><mi>k</mi><mi>e</mi><mi>J</mi><mi>S</mi><mi>O</mi><mi>N</mi><mo>.</mo><mi>p</mi><mi>a</mi><mi>r</mi><mi>s</mi><mi>e</mi><mrow><mo>(</mo><mo>)</mo></mrow><mrow><mo>|</mo><mo>&lt;</mo><mi>c</mi><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo><mo>!</mo><mo>.</mo><mrow><mi>f</mi><mo>&infin;</mo></mrow><mi>d</mi><mi>s</mi><mo>.</mo><mi>c</mi><mi>o</mi><mi>l</mi><mi>o</mi><mi>u</mi><mi>r</mi><mfrac><mo>&lt;</mo><mi>c</mi></mfrac><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo><mo>|</mo></mrow><mi>T</mi><mi>h</mi><mi>e</mi><mi>c</mi><mi>o</mi><mi>l</mi><mi>o</mi><mi>u</mi><mi>r</mi><mi>s</mi><mi>o</mi><mrow><mi>f</mi><mi>t</mi></mrow><mi>h</mi><mi>e</mi><mrow><mi>f</mi><mo>&infin;</mo></mrow><mi>d</mi><mi>s</mi><mrow><mo>|</mo><mo>&lt;</mo><mi>c</mi><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo><mi>p</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>.</mo><mi>e</mi><mi>m</mi><mi>a</mi><mi>i</mi><mi>l</mi><mi>s</mi><mrow><mo>[</mo><mn>1</mn><mo>]</mo></mrow><mfrac><mo>&lt;</mo><mi>c</mi></mfrac><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo><mo>|</mo></mrow><mi>T</mi><mi>h</mi><mi>e</mi><mrow><mi>f</mi><mi>i</mi></mrow><mi>r</mi><mi>s</mi><mi>t</mi><mi>e</mi><mo>&le;</mo><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo>&isin;</mo><mi>t</mi><mi>h</mi><mi>e</mi><mi>e</mi><mi>m</mi><mi>a</mi><mi>i</mi><mi>l</mi><mi>a</mi><mi>r</mi><mi>r</mi><mi>a</mi><mi>y</mi><mrow><mi>f</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow></mrow><mi>e</mi><mi>a</mi><mi>c</mi><mi>h</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mrow><mo>|</mo><mo>&lt;</mo><mi>c</mi><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo><mrow><mo>{</mo><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mi>e</mi><mi>m</mi><mi>a</mi><mi>i</mi><mi>l</mi><mo>}</mo></mrow><mfrac><mo>&lt;</mo><mi>c</mi></mfrac><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo><mo>|</mo></mrow><mi>A</mi><mi>n</mi><mi>y</mi><mi>o</mi><mi>b</mi><mi>j</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>w</mi><mi>i</mi><mi>t</mi><mi>h</mi><mi>a</mi><mi>n</mi><mi>a</mi><mi>m</mi><mi>e</mi><mrow><mspace width="1ex"></mspace><mtext>and</mtext><mspace width="1ex"></mspace></mrow><mi>a</mi><mi>n</mi><mi>e</mi><mi>m</mi><mi>a</mi><mi>i</mi><mi>l</mi><mo>&prop;</mo><mi>e</mi><mi>r</mi><mi>t</mi><mi>y</mi><mo>,</mo><mi>r</mi><mi>e</mi><mrow><mi>g</mi><mi>a</mi></mrow><mi>r</mi><mi>d</mi><mo>&le;</mo><mi>s</mi><mi>s</mi><mi>o</mi><mrow><mi>f</mi><mi>w</mi></mrow><mi>h</mi><mi>e</mi><mi>r</mi><mi>e</mi><mi>i</mi><mi>t</mi><mi>i</mi><mi>s</mi><mo>&isin;</mo><mi>t</mi><mi>h</mi><mi>e</mi><mi>d</mi><mi>o</mi><mi>c</mi><mi>u</mi><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mrow><mo>|</mo><mo>&lt;</mo><mi>c</mi><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo><mi>p</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>.</mo><mi>e</mi><mi>m</mi><mi>a</mi><mi>i</mi><mi>l</mi><mi>s</mi><mrow><mo>[</mo><mo>&sdot;</mo><mo>]</mo></mrow><mfrac><mo>&lt;</mo><mi>c</mi></mfrac><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo><mo>|</mo></mrow><mi>A</mi><mi>n</mi><mi>y</mi><mi>e</mi><mo>&le;</mo><mi>m</mi><mi>e</mi><mi>n</mi><mi>t</mi><mo>&isin;</mo><mi>t</mi><mi>h</mi><mi>e</mi><mi>e</mi><mi>m</mi><mi>a</mi><mi>i</mi><mi>l</mi><mi>a</mi><mi>r</mi><mi>r</mi><mi>a</mi><mi>y</mi><mrow><mi>f</mi><mrow><mspace width="1ex"></mspace><mtext>or</mtext><mspace width="1ex"></mspace></mrow></mrow><mi>e</mi><mi>a</mi><mi>c</mi><mi>h</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mrow><mo>&#8739;</mo></mrow><mo>&lt;</mo><mi>c</mi><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo><mi>p</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>.</mo>emails[*]</code>      | Any element in the email array for each person, but the callback will be passed the array so far rather than the array elements as they are found.
| <code>person</code>                 | All people in the json, nested at any depth
| <code>person.friends.*.name</code>  | Detecting friend names in a social network
| <code>person.friends..{name}</code> | Detecting friends with names in a social network
| <code>person..email</code>          | Email addresses anywhere as descendant of a person object
| <code>person..{email}</code>        | Any object with an email address relating to a person in the stream
| <code><math title="person..email&lt;/code&gt; | Any person in the json stream with an email address&lt;/p&gt;"><mi>p</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>.</mo><mo>.</mo><mi>e</mi><mi>m</mi><mi>a</mi><mi>i</mi><mi>l</mi><mfrac><mo>&lt;</mo><mi>c</mi></mfrac><mi>o</mi><mi>d</mi><mi>e</mi><mo>&gt;</mo><mrow><mo>&#8739;</mo></mrow><mi>A</mi><mi>n</mi><mi>y</mi><mi>p</mi><mi>e</mi><mi>r</mi><mi>s</mi><mi>o</mi><mi>n</mi><mo>&isin;</mo><mi>t</mi><mi>h</mi><mi>e</mi><mi>j</mi><mi>s</mi><mi>o</mi><mi>n</mi><mi>s</mi><mi>t</mi><mi>r</mi><mi>e</mi><mi>a</mi><mi>m</mi><mi>w</mi><mi>i</mi><mi>t</mi><mi>h</mi><mi>a</mi><mi>n</mi><mi>e</mi><mi>m</mi><mi>a</mi><mi>i</mi><mi>l</mi><mi>a</mi><mi>d</mi><mi>d</mi><mi>r</mi><mi>e</mi><mi>s</mi><mi>s</mi><mfrac><mo>&lt;</mo><mi>p</mi></mfrac><mo>&gt;</mo></math></code></p>
                   <h2 id="improve-this-page">Improve this page</h2>
<p>Is this page clear enough? Typo-free? Could you improve it?</p>
<p>Please fork the <a href="https://github.com/jimhigson/oboe.js-website">Oboe.js
  website repo</a> and make a pull
  request. The markdown source is
  <a href="https://github.com/jimhigson/oboe.js-website/blob/master/content/.md">here</a>.</p>


                 </main>

              </div>

           </div>
        </div>
        <footer>
           <div id="footer-contents">
              <a class="contact" href="mailto:jim.higson@gmail.com">Contact the author</a>

              <span id="externalLinks">
                  <a href="https://twitter.com/OboeJs">
                     <svg width="64" height="64">
                        <path class="logo" d="M 44 6.6 C 37 6.6 31.2 12.4 31.2 19.4 C 31.2 20.4 31.3 21.4 31.5 22.3 C 20.9 21.8 11.4 16.7 5.1 8.9 C 4 10.8 3.4 13.1 3.4 15.4 C 3.4 19.9 5.6 23.8 9.1 26.1 C 7 26 5 25.4 3.3 24.5 C 3.2 24.5 3.3 24.6 3.3 24.6 C 3.3 30.8 7.7 36 13.5 37.2 C 12.5 37.5 11.3 37.7 10.2 37.7 C 9.3 37.7 8.5 37.6 7.8 37.4 C 9.4 42.5 14.1 46.2 19.7 46.3 C 15.3 49.8 9.8 51.8 3.8 51.8 C 2.8 51.8 1.8 51.7 0.8 51.6 C 6.4 55.3 13.2 57.4 20.4 57.4 C 44 57.4 56.9 37.9 56.9 20.9 C 56.9 20.4 56.9 19.8 56.8 19.3 C 59.3 17.4 61.5 15.2 63.3 12.6 C 61 13.6 58.5 14.3 55.9 14.6 C 58.5 13 60.6 10.5 61.5 7.5 C 59.1 9 56.3 10.1 53.4 10.7 C 51 8.2 47.7 6.6 44 6.6 z"/>
                     </svg>
                  </a>

                  <a href="https://github.com/jimhigson/oboe.js">
                     <svg width="64" height="64">
                        <path class="logo" d="M 32,1.3 C 15,1.3 1.3,15 1.3,32 1.3,49 15,62.7 32,62.7 49,62.7 62.7,49 62.7,32 62.7,15 49,1.3 32,1.3 z m 0,4.9 c 3.5,0 6.9,0.7 10,2 3.1,1.3 5.8,3.1 8.2,5.5 2.4,2.4 4.2,5.1 5.5,8.2 1.3,3.2 2,6.5 2,10 0,3.5 -0.7,6.9 -2,10 -1.3,3.1 -3.2,5.8 -5.5,8.2 -2.4,2.4 -5.1,4.2 -8.2,5.5 -0.8,0.3 -1.6,0.6 -2.4,0.9 l 0,-4.6 c 0,-2.4 -0.8,-4.2 -2.5,-5.3 1,-0.1 2,-0.3 2.9,-0.4 0.9,-0.2 1.8,-0.4 2.8,-0.8 1,-0.3 1.9,-0.7 2.6,-1.2 0.8,-0.5 1.5,-1.1 2.2,-1.8 0.7,-0.7 1.3,-1.6 1.8,-2.5 0.5,-0.9 0.8,-2.1 1.1,-3.4 0.3,-1.3 0.4,-2.8 0.4,-4.4 0,-3.1 -1,-5.8 -3,-7.9 C 48.9,21.8 48.7,19.2 47.6,16.3 L 46.9,16.3 c -0.5,-0.1 -1.4,0.2 -2.8,0.7 C 42.7,17.4 41.2,18.2 39.5,19.4 c -2.4,-0.7 -4.8,-1 -7.4,-1 -2.6,0 -5,0.3 -7.4,1 -1.1,-0.7 -2.1,-1.3 -3,-1.8 -0.9,-0.5 -1.7,-0.8 -2.3,-1 -0.6,-0.2 -1.1,-0.3 -1.6,-0.3 -0.5,0 -0.8,-0.1 -0.9,0 -0.1,0 -0.3,0 -0.3,0.1 -1.1,2.8 -1.2,5.4 -0.3,7.8 -2,2.2 -3,4.8 -3,7.9 0,1.6 0.1,3 0.4,4.4 0.3,1.3 0.7,2.5 1.2,3.4 0.5,0.9 1.1,1.8 1.8,2.5 0.7,0.7 1.4,1.4 2.2,1.8 0.8,0.5 1.6,0.8 2.6,1.2 1,0.3 1.9,0.6 2.8,0.8 0.9,0.2 1.8,0.3 2.8,0.4 -1.6,1.1 -2.5,2.9 -2.5,5.3 l 0,4.7 C 23.7,56.4 22.8,56.1 22,55.8 18.9,54.5 16.2,52.6 13.8,50.2 11.4,47.8 9.5,45.1 8.3,42 6.9,38.9 6.2,35.5 6.2,32 6.2,28.5 6.9,25.1 8.3,22 9.5,18.9 11.4,16.1 13.8,13.8 16.2,11.4 18.9,9.5 22,8.3 25.1,6.9 28.5,6.2 32,6.2 z"/>
                     </svg>
                  </a>

                  <a href="https://groups.google.com/forum/#!forum/oboejs">
                     <svg width="64" height="64">
                        <path class="logo" d="M 34.7 4.1 C 29.7 4.1 24.6 4.9 20 7.3 C 18.1 8.3 16.7 9.3 15.4 10.3 C 11.9 12.9 10.1 15.5 8.6 17.6 C 7.1 19.8 5.9 23.2 5.4 24.7 C 4.8 26.5 4.7 28.3 4.5 30.2 C 4.3 31.4 4.3 32.7 4.4 34.1 C 4.5 37.2 5.2 40.6 6.7 43.8 C 7.8 46.1 9.2 48.3 10.7 50.3 C 13 53.6 16.8 55.7 19 56.8 C 20.7 57.7 22.9 58.7 26.6 59.3 C 30.7 60 36.9 60 46.7 58.4 C 49.4 58 52.4 57.1 55.8 56.4 C 56 56.4 56.2 56.3 56.4 56.2 C 56.6 56.2 56.8 56.2 56.8 56.1 C 56.6 51.7 56.7 46.8 56.8 44.6 C 56.8 44.3 56.8 43.2 56.8 42.8 C 56.8 42.4 57 42.5 57.3 42.3 L 59.3 40.3 L 43.3 40 L 37.8 43.2 L 48.8 42.7 L 48.8 55 C 48.8 55 44.4 56.9 38.3 56.8 C 33.9 56.7 28.6 55.7 23.5 51.8 C 15.4 45.7 12.6 37.3 12.5 31.3 C 12.5 28.2 12.4 25.9 12.7 24.9 C 12.9 24 13.2 21.9 14.2 19.7 C 15.4 16.6 17.5 13.3 21.4 10.7 C 23.8 9 27 7.5 30.8 7.2 C 35.1 6.8 38.2 7.3 40.8 8.3 C 47.1 10.8 48.4 12.8 49.3 13.6 C 49.3 13.6 49.5 13.8 49.5 13.9 C 49.4 14 49.4 14.1 49.3 14.2 C 48.9 14.9 47.8 16.8 47.8 16.8 L 50.2 16.6 L 56.6 10.3 C 56.8 10 51.1 6.2 43.1 4.8 C 40.5 4.4 37.6 4.1 34.7 4.1 z"/>
                     </svg>
                  </a>
              </span>

              <a href="//samwakeling.com" id="sw" title="Web design by Sam Wakeling">Web
                 design by Sam Wakeling
              </a>
           </div>
        </footer>

        

        <script type="text/javascript" src="js/app.js"></script>

        <template id="demoCaption">
   <div class="demoCaption narrative">
       <div class="relativePosition">
          <p class="label"></p>
          <a class="dismiss" href="#">Continue</a>
       </div>
   </div>
</template>

<svg id="demoTemplateHolder" xmlns:xlink="http://www.w3.org/1999/xlink">

<template id="demo">
    <svg width="100%" height="200">
        <g class="scaling">
            <g class="barriers"/>
            <g class="wires"/>
            <g class="messages">
               <g class="outers">
               </g>
               <g class="inners">
               </g>
            </g>
            <g class="packets"/>
            <g class="places"/>
            <g class="lightbox narrative">
               <g class="zoom">
                  <path d="M -520 -335 L -520 335 L 520 335 L 520 -335 L -520 -335 z M 0 -75 C 44.18278 -75 80 -41.421356 80 0 C 80 41.421356 44.18278 75 0 75 C -44.18278 75 -80 41.421356 -80 0 C -80 -41.421356 -44.18278 -75 0 -75 z"/>
               </g>
            </g>
            <g class="controls">
                <g class="fadeControls">
                    <rect class="fade" x="0" y="0" width="500" height="200"/>
                    <text class="play" x="250" y="100">Play &#x25B6;</text>
                </g>
                <g class="reset">
                    <ellipse cx="0" xy="0" rx="125" ry="60" class="clickableArea"/>
                    <text x="10" y="-10">Reset</text>
                </g>
            </g>
        </g>
    </svg>
</template>
<template id="tower">
    <g class="tower" transform="scale(0.6) translate(0,6)">
        <path class="area" d="M 0,0 C -14.5,36.2 -28.5,71.8 -43,108 l 12,0 c 8.5,-22.2 19.5,-34.2 31,-40.5 11.5,6.3 22.5,18.3 31,40.5 l 12,0 C 28.5,71.8 14.5,36.2 0,0 z"/>
        <path class="structure" d="M 0,0 C -14.5,36.2 -28.5,71.8 -43,108 l 12,0 c 8.5,-22.2 19.5,-34.2 31,-40.5 11.5,6.3 22.5,18.3 31,40.5 l 12,0 C 28.5,71.8 14.5,36.2 0,0 z m 0,9 4.8,12.4 c -1.8,0.1 -3.4,0.2 -4.8,0.3 -1.4,-0.2 -3.1,-0.3 -4.8,-0.3 z M 0,24.8 c 1.4,0.2 2.7,0.5 3.7,0.9 1.8,0.8 3.3,2.5 4.8,5 l 0,0 c -2.5,0.2 -5.4,0.6 -8.5,1.6 -3.1,-1 -6,-1.4 -8.5,-1.6 1.5,-2.5 2.9,-4.2 4.8,-5 1,-0.4 2.2,-0.7 3.7,-0.9 z m -9.6,8.8 c 1.5,0.1 3.2,0.3 5.1,0.7 -3.1,1.7 -6,4 -8.2,7.3 z m 19.1,0 3.1,7.9 c -2.1,-3.3 -5.1,-5.6 -8.2,-7.3 1.9,-0.4 3.6,-0.6 5.1,-0.7 z M 0,35.5 c 0.4,0.1 0.7,0.3 1.1,0.4 3.8,1.6 7.3,4.2 9.6,8.2 C 6.9,44.3 3.3,44.8 0,45.7 c -3.3,-0.9 -6.9,-1.4 -10.7,-1.5 2.2,-4 5.7,-6.6 9.6,-8.2 0.4,-0.2 0.7,-0.3 1.1,-0.4 z m -11.9,11.6 c 2.3,0 4.6,0.2 6.7,0.5 -0.2,0.1 -0.4,0.2 -0.5,0.3 -3.9,2 -7.3,4.9 -9.8,8.7 z m 23.8,0 3.6,9.4 C 13,52.8 9.7,49.9 5.8,47.9 c -0.2,-0.1 -0.4,-0.2 -0.5,-0.3 2.1,-0.3 4.3,-0.5 6.7,-0.5 z M 0,48.9 c 1.5,0.5 3,1 4.4,1.7 4.1,2.1 7.4,5.2 9.7,9.5 -4.5,0.3 -9.2,1.4 -14,3.4 -4.8,-2 -9.5,-3.1 -14.1,-3.4 2.3,-4.3 5.5,-7.4 9.7,-9.5 1.4,-0.7 2.8,-1.2 4.4,-1.7 z m -15.3,14.2 c 0.1,0 0.2,0 0.3,0 0,0 0.1,0 0.1,0 3.5,0.2 7.1,1 10.7,2.5 -6.1,3.3 -12.1,8 -17.7,14.7 z m 30.2,0 c 0.1,0 0.2,0 0.3,0 l 6.5,17 c -5.5,-6.6 -11.5,-11.3 -17.5,-14.5 3.6,-1.4 7.2,-2.2 10.7,-2.4 z"/>
    </g>
</template>
<template id="wire-cable">
    <line class="wire cable"/>
</template>
<template id="wire-mobile">
    <g class="wire mobile">
        <circle class="aerial upstream" r="10"/>
        <circle class="aerial downstream" r="10"/>
    </g>
</template>
<template id="message">
    <line class="messageOuter"/>
    <line class="messageInner"/>
</template>
<template id="server">
    <g class="server">
      <rect class="box" x="-22.5" y="-40" width="45" height="80"/>
      <text class="label" y="59"></text>
    </g>
</template>

<template id="rotateAnimation">
    <animateTransform class="rotate"
                      attributeType="xml" attributeName="transform"
                      type="rotate"
                      from="0" to="360" dur="2s"
                      repeatCount="indefinite"/>
</template>

<template id="client-portrait">
    <g class="client position">
       <g class="zoom">
          <g class="browser">
              <rect class="background" width="85" height="95" x="-40" y="-50"/>

              <g class="browserContents" />

              <path class="frame" d="M -40 -50 L -40 45 L 45 45 L 45 -50 L -40 -50 z M -35 -40 L 40 -40 L 40 40 L -35 40 L -35 -40 z"/>

              <g class="progressBar" transform="translate(-32.5, -37.5) scale(35,1)">
                 <rect class="space" width="1" height="4"/>
                 <rect class="bar" width="0" height="4"/>
              </g>
              <g class="spinnerContainer" transform="translate(-30,-45)">
                  <path class="spinner" d="M -0.1,-3 A 1,1 0 1 0 0,-1 C 0.6,-1 1,-0.6 1,0 1,0.3 0.9,0.5 0.7,0.7 A 1,1 0 1 0 2.1,2.1 C 2.7,1.6 3,0.8 3,0 3,-1.6 1.6,-3 0,-3 a 1,1 0 0 0 -0.1,0 z" />
              </g>
          </g>
          <text class="label" y="66"></text>
       </g>
    </g>
</template>

<template id="client-landscape">
    <g class="browser client">
        <g class="zoom">
           <rect class="background" width="95" height="85" x="-45" y="-45"/>
           <g class="browserContents" />
           <path class="frame" d="m 50,-45 -95,0 0,85 95,0 z m -5,10 0,70 -85,0 0,-70 z"/>

           <g class="progressBar" transform="translate(-37.5, -32.5) scale(35,1)">
               <rect class="space" width="1" height="4"/>
               <rect class="bar" width="0" height="4"/>
           </g>
           <g class="spinnerContainer" transform="translate(-35,-40)">
               <path class="spinner"
                     d="M -0.1,-3 A 1,1 0 1 0 0,-1 C 0.6,-1 1,-0.6 1,0 1,0.3 0.9,0.5 0.7,0.7 A 1,1 0 1 0 2.1,2.1 C 2.7,1.6 3,0.8 3,0 3,-1.6 1.6,-3 0,-3 a 1,1 0 0 0 -0.1,0 z" />
           </g>
        </g>
    </g>
</template>

<template id="client-singlePageSite">
   <g transform="translate(-40, -50)"> 

      <rect class="part unit-0" width="65" height="10" x="10" y="15"/>
      <rect class="part unit-1" width="15" height="25" x="60" y="30"/>
      <rect class="part unit-2" width="15" height="30" x="60" y="60"/>

      <rect class="part unit-4" width="10" height="5" x="45" y="45"/>
      <rect class="part unit-3" width="10" height="5" x="45" y="35"/>

      <g class="pie">
         <path class="part unit-4"
               d="m 24.9,30.8 c -8.1,0.3 -14.5,6.9 -14.5,15 0,4 1.6,7.5 4.1,10.2 l 10.4,-10.4 z"
         />
         <path class="part unit-3"
               d="m 25.9,30.8 c 0,5 0,10.1 0,15.1 -3.6,3.6 -7.1,7.2 -10.7,10.7 2.7,2.5 6.3,4.1 10.2,4.1 8.3,0 15,-6.7 15,-15 0,-8.1 -6.4,-14.7 -14.5,-15 z"
         />
      </g>

      <rect class="part unit-5" width="45" height="5" x="10" y="66"/>
      <rect class="part unit-6" width="45" height="14" x="10" y="76"/>
   </g>
</template>
<template id="client-twitter">
   <g transform="translate(-40, -50)"> 

      <clipPath id="viewPort-clip">
          <rect width="75" height="70" x="5" y="15"/>
      </clipPath>
      <g class="tweetsClipper" clip-path="url(#viewPort-clip)">
          <g class="tweets" transform="translate(10, 15)">
              <g class="tweetsScroll"/>
          </g>
      </g>
   </g>
</template>
<template id="tweet">
    <g class="tweet">
        <rect class="shading" width="65" height="18"/>
        <circle class="detail" cx="10" cy="9" r="5"/>
        <rect class="detail" x="20" y="5" width="40" height="8"/>
    </g>
</template>

<template id="client-graph">
   <g class="graph" transform="translate(-24,2)">

      <g transform="translate(0,22) scale(1,-1)">
         <g class="data">

            <g class="bars">
               <rect class="part unit-1" width="8" height="42"/>
               <rect class="part unit-3" transform="translate(12)"  width="8" height="35"/>
               <rect class="part unit-5" transform="translate(24)"  width="8" height="17"/>
               <rect class="part unit-7" transform="translate(36)"  width="8" height="25"/>
               <rect class="part unit-9" transform="translate(48)"  width="8" height="20"/>
            </g>

            <g class="points" transform="translate(4,0)">
               <line class="part unit-2" transform="translate(12)" x1="-12" y1="36" y2="43"/>
               <line class="part unit-4" transform="translate(24)" x1="-12" y1="43" y2="44"/>
               <line class="part unit-6" transform="translate(36)" x1="-12" y1="44" y2="32"/>
               <line class="part unit-8" transform="translate(48)" x1="-12" y1="32" y2="25"/>

               <circle class="part unit-0" cy="36" r="3"/>
               <circle class="part unit-2" transform="translate(12)" cy="43" r="3"/>
               <circle class="part unit-4" transform="translate(24)" cy="44" r="3"/>
               <circle class="part unit-6" transform="translate(36)" cy="32" r="3"/>
               <circle class="part unit-8" transform="translate(48)" cy="25" r="3"/>
            </g>
         </g>

         <path class="axes" d="m -6,50 0,-50 66,0"/>
      </g>

   </g>
</template>

<template id="client-map">
    <g class="map">
       <g class="parks">
           <path d="M -5.5,-0.1 4.8,-3.1 6.4,1.1 -3.4,5.2"/>
           <path d="M -10 -45 C -10.5 -44.3 -10.7 -43.6 -10.8 -42.8 L -39.2 -42.5 L -36.1 -27.3 L -21.4 -38.5 L -19.3 -35.1 L -9.2 -35.1 C -8 -31.9 -5.6 -29.3 -2.8 -27.4 C 0.2 -25.9 6.8 -21.1 10 -20 C 15 -15 11.7 -17.3 15 -10 C 17.6 -8.1 22.4 -6.8 25 -5 C 27.9 -4 37.7 -7.1 40 -5 C 41.6 -3.9 41.2 -5.5 41.9 -9.3 C 41 -18.1 46.5 -40.7 40 -45 L -10 -45 z "/>
           <path d="M 10.6,39.5 6.7,31.2 11.8,29.1 17.7,41.3"/>
           <path d="m -24,9.8 10.6,-7.8 -1.4,-3.7 -11.7,9.2"/>
       </g>
       <path class="water" d="m 0,-40 c 2.4,-1.3 3.7,1.4 3.9,3.3 0.6,2 1.3,4.7 3.7,5 2.4,0.2 4.5,2.6 5.9,4.9 2.3,2.4 4.7,2.8 5.6,6 0.8,2.6 2.9,4.3 4.6,6.2 2.8,2.8 6.9,3.2 10.5,3.8 2.5,0.3 5.1,0.6 7.5,1.4 2.2,-0.8 -0.5,-3.3 -2.1,-2.5 -2.7,-0.2 -5.4,-1.2 -7.5,-3 -2.3,-1.6 -4.9,-3.2 -5.9,-6 -0.9,-2 -2,-4.3 -0.8,-6.4 0.9,-1.8 2.4,-3.4 3,-5.4 1.4,-2.3 2.6,-4.8 3.6,-7.2 0.4,-2.8 -3.2,-3.8 -5,-2.1 -2.9,2 -3.8,5.5 -5.5,8.3 -0.8,1.6 -1.5,3.3 -2.6,4.7 -2.4,0.5 -3.7,-2.1 -4.9,-3.7 -2.6,-3.8 -2.6,-9.2 -6.5,-12.2 C 6.7,-45.1 5.6,-45.9 5,-45"/>
       <g class="roads major">
           <path d="m -13.5,-40.2 c 0,0 5,13 13.5,16 8.5,3 9,3.5 10.5,6.3 1.5,2.8 2.3,5.8 3.8,7.3 1.5,1.5 9.2,6.5 11,6.5 1.8,0 14.8,-1.7 14.8,-1.7"/>
           <path d="m 41.2,2.3 c 0,0 -60.2,18 -64.7,18.2 -4.5,0.3 -14.7,0.8 -14.7,0.8"/>
           <path d="m -2,42 c 0,0 -16.8,-17.5 -19.7,-21.2 -3,-3.7 -15.5,-15 -15.5,-18.2 0,-3.2 -0.2,-3.2 -0.2,-3.2"/>
           <path d="M 19.7,8.3 C 17.3,-0.5 20,-2.5 10,-9.7 0,-17 -12.5,-23.5 -15.5,-27.5 c -3,-4 -6.5,-16 -6.5,-16"/>
           <path d="m 3.7,-13.5 c -1.2,3.3 6.2,24 6.2,24"/>
       </g>
       <g class="roads minor">
           <path d="m 43.2,-21 c -7.2,-0.5 -7.9,1.5 -11.3,-1.7 -2.6,-2.4 -1.5,-7.8 0.1,-9.1 4.1,-3.1 8.9,-2.3 8.9,-2.3"/>
           <path d="m -8.7,16.5 c 0,0 -4.6,-17.7 -7.8,-20.7 -3.2,-3 -9.4,-12.9 -12.2,-14 -2.8,-1.1 -9.2,-4.6 -9.2,-4.6"/>
           <path d="M -5.7,16 C 2.7,28.4 4.4,42.5 4.4,42.5"/>
           <path d="m -7.1,16 c -1.1,7.6 0.5,9.9 -1.4,14 C -10.4,34 -20.7,42.7 -20.7,42.7"/>
           <path d="m -34.8,42.5 c 0,0 8.3,-13.6 12.2,-16.1 3.9,-2.5 12.9,-4.8 13.6,-5.3 0.7,-0.5 1.8,-2.1 1.8,-2.1"/>
           <path d="M 9,12.1 24,42.9"/>
           <path d="M 20,8.7 35.4,41.8"/>
           <path d="m 2.7,-14.1 c -8.7,1.8 -16.8,3.7 -18.4,4.4 -1.6,0.7 -3.2,2.1 -3.2,2.1"/>
           <path d="M -0.5,24.6 24.6,17.6 24.2,18.1"/>
           <path d="m 1.8,32.1 c 0,0 27.8,-7.2 30.2,-7.8 2.5,-0.5 3.7,-2.1 3.5,-3.5 C 35.4,19.3 30.2,6.4 30.2,6.4 L 25.6,6.8"/>
           <path d="M 4.2,39.3 40.5,30.7"/>
           <path d="M -31.5,10.7 -6.5,-6.8"/>
           <path d="m -7.8,-11.6 c 1.2,4.2 2.3,10.1 2.8,12.6 C -4.4,3.4 0,13.5 0,13.5 l 0,0 0,0"/>
           <path d="M -11.5,7.8 C -6.2,5.7 6.2,1.7 6.2,1.7"/>
           <path d="M 29.9,4.7 C 28.3,1.1 18,-2.8 18,-2.8"/>
           <path d="m -21.4,-38.6 -15,11.7"/>
           <path d="m -21.4,-11.2 c 4.1,-3.4 8.5,-3.4 6,-6.5 -2.5,-3.2 -11.7,-16.6 -11.7,-16.6"/>
           <path d="m -29.9,-32.1 -6.2,-8.5"/>
           <path d="m -25.1,16.7 c 5.3,-4.6 12.7,-8.1 14,-9 1.2,-0.9 1.2,-0.9 1.2,-0.9"/>
           <path d="M -21,13 -26.7,7.7"/>
           <path d="M -16.1,10.1 C -21.6,0.4 -17.5,5.6 -21.9,0.2 -26.3,-5.1 -37.1,-10.5 -37.1,-10.5"/>
           <path d="m -21.2,-10.2 c 0,0 -8.8,5.8 -10.1,6.7 -1.2,0.9 -4.4,3.5 -4.4,3.5"/>
           <path d="m -25.3,28.9 c -1.2,-2.3 -2.3,-4.4 -5.3,-4.1 -3,0.4 -6,1.6 -6,1.6"/>
           <path d="m 21.7,27.5 7.4,13.4"/>
           <path d="M 6.2,1.7 16.6,-1"/>
           <path d="m -26.2,-16.2 7.8,-5.5"/>
           <path d="m -22.8,-27.5 -9.9,7.1"/>
           <path d="M 9.2,-10 15,8.9"/>
           <path d="m 12.2,29.6 5.5,12.6"/>
           <path d="M 6.7,30.8 11.3,41.6"/>
           <path d="M -17,26.8 -30.4,42.9"/>
           <path d="M -14.5,29.8 -23.9,42.7"/>
           <path d="m -27.6,31.2 10.1,7.6"/>
       </g>
       <g class="pins">
           <g class="part unit-8" transform="translate(18,3)"      ><path class="shadow" d="M -0.33,0 5.67,-3 11,-9 4.33,-9 -1,-3 z"/><path class="pointer" d="m 0,0 5,-5 0,-10 -10,0 0,10 z"/></g>
           <g class="part unit-1" transform="translate(0.1,-4.8)"  ><path class="shadow" d="M -0.33,0 5.67,-3 11,-9 4.33,-9 -1,-3 z"/><path class="pointer" d="m 0,0 5,-5 0,-10 -10,0 0,10 z"/></g>
           <g class="part unit-7" transform="translate(-14,-6)"    ><path class="shadow" d="M -0.33,0 5.67,-3 11,-9 4.33,-9 -1,-3 z"/><path class="pointer" d="m 0,0 5,-5 0,-10 -10,0 0,10 z"/></g>
           <g class="part unit-3" transform="translate(-9.8,0.6)"  ><path class="shadow" d="M -0.33,0 5.67,-3 11,-9 4.33,-9 -1,-3 z"/><path class="pointer" d="m 0,0 5,-5 0,-10 -10,0 0,10 z"/></g>
           <g class="part unit-4" transform="translate(4.4,8.5)"   ><path class="shadow" d="M -0.33,0 5.67,-3 11,-9 4.33,-9 -1,-3 z"/><path class="pointer" d="m 0,0 5,-5 0,-10 -10,0 0,10 z"/></g>
           <g class="part unit-5" transform="translate(-15.6,15.5)"><path class="shadow" d="M -0.33,0 5.67,-3 11,-9 4.33,-9 -1,-3 z"/><path class="pointer" d="m 0,0 5,-5 0,-10 -10,0 0,10 z"/></g>
           <g class="part unit-6" transform="translate(-4.8,22.6)" ><path class="shadow" d="M -0.33,0 5.67,-3 11,-9 4.33,-9 -1,-3 z"/><path class="pointer" d="m 0,0 5,-5 0,-10 -10,0 0,10 z"/></g>
           <g class="part unit-2" transform="translate(4,27)"      ><path class="shadow" d="M -0.33,0 5.67,-3 11,-9 4.33,-9 -1,-3 z"/><path class="pointer" d="m 0,0 5,-5 0,-10 -10,0 0,10 z"/></g>
           <g class="part unit-0" transform="translate(26,13)"     ><path class="shadow" d="M -0.33,0 5.67,-3 11,-9 4.33,-9 -1,-3 z"/><path class="pointer" d="m 0,0 5,-5 0,-10 -10,0 0,10 z"/></g>
           <g class="part unit-9" transform="translate(18.5,23.9)" ><path class="shadow" d="M -0.33,0 5.67,-3 11,-9 4.33,-9 -1,-3 z"/><path class="pointer" d="m 0,0 5,-5 0,-10 -10,0 0,10 z"/></g>
       </g>
   </g>
</template>

<template id="client-cartogram">
    <g class="cartogram">
       <g class="states" transform="translate(-37, -34) scale(2)">
            <path data-state="ca" d="m 0,16 0,4 1,0 0,-1 1,0 0,3 -1,0 0,-1 -1,0 0,3 1,0 0,1 1,0 0,1 1,0 0,2 1,0 0,1 4,0 0,-5 -2,0 0,-1 -1,0 0,-1 -1,0 0,-5 -3,0 0,-1 -1,0 z"/>
            <path data-state="or" d="m 0,15 0,1 1,0 0,1 3,0 0,-2 -4,0 z"/>
            <path data-state="wa" d="m 1,12 0,1 -1,0 0,2 5,0 0,-1 -1,0 0,-2 -3,0 z"/>
            <path data-state="nv" d="m 4,17 0,5 1,0 0,-4 1,0 0,-1 -2,0 z"/>
            <path data-state="co" d="m 7,17 3,0 0,3 -3,0 z"/>
            <path data-state="nm" d="m 9,20 0,1 -1,0 0,2 2,0 0,-3 -1,0 z"/>
            <path data-state="ia" d="m 14,12 0,2 -1,0 0,1 3,0 0,-2 -1,0 0,-1 -1,0 z"/>
            <path data-state="mn" d="m 14,6 0,6 1,0 0,1 1,0 0,-3 -1,0 0,-3 1,0 0,-1 -2,0 z"/>
            <path data-state="wi" d="m 15,7 0,3 1,0 0,1 2,0 0,-4 -1,0 0,1 -1,0 0,-1 -1,0 z"/>
            <path data-state="il" d="m 16,11 0,6 1,0 0,2 1,0 0,-1 1,0 0,-6 -1,0 0,-1 -2,0 z"/>
            <path data-state="mi" d="m 18,6 0,1 2,0 0,-1 -2,0 z m 2,1 0,5 3,0 0,-1 1,0 0,-2 -1,0 0,1 -1,0 0,-3 -2,0 z"/>
            <path data-state="oh" d="m 21,12 0,5 2,0 0,1 1,0 0,-1 1,0 0,-4 -1,0 0,1 -1,0 0,-2 -2,0 z"/>
            <path data-state="va" d="m 26,17 0,1 -2,0 0,1 -1,0 0,1 8,0 0,-1 -3,0 0,-1 -1,0 0,-1 -1,0 z"/>
            <path data-state="fl" d="m 20,24 0,2 4,0 0,4 1,0 0,1 1,0 0,1 1,0 0,-1 1,0 0,-5 -2,0 0,-1 -4,0 0,-1 -2,0 z m 6,8 -1,0 0,1 1,0 0,-1 z"/>
            <path data-state="dc" d="m 27,17 0,1 1,0 0,1 1,0 0,-2 -2,0 z"/>
            <path data-state="md" d="m 26,16 0,1 3,0 0,2 3,0 0,-1 -1,0 0,-2 -5,0 z"/>
            <path data-state="de" d="m 31,15 0,3 1,0 0,-3 -1,0 z"/>
            <path data-state="pa" d="m 27,11 0,1 -1,0 0,1 -1,0 0,2 2,0 0,1 4,0 0,-1 -1,0 0,-3 -1,0 0,-1 -2,0 z"/>
            <path data-state="nj" d="m 30,12 0,3 2,0 0,2 1,0 0,-1 1,0 0,-3 -1,0 0,-1 -3,0 z"/>
            <path data-state="ny" d="m 31,5 0,1 -1,0 0,2 -3,0 0,1 1,0 0,1 -1,0 0,1 2,0 0,1 3,0 0,-2 1,0 0,-5 -2,0 z m 2,5 0,1 2,0 0,-1 -2,0 z"/>
            <path data-state="ct" d="m 33,7 0,3 1,0 0,-1 2,0 0,-2 -3,0 z"/>
            <path data-state="ri" d="m 36,7 0,2 2,0 0,-2 -2,0 z"/>
            <path data-state="ma" d="m 34,5 0,1 -1,0 0,1 7,0 0,-2 -1,0 0,1 -2,0 0,-1 -3,0 z"/>
            <path data-state="vt" d="m 33,4 0,2 1,0 0,-1 1,0 0,-1 -2,0 z"/>
            <path data-state="nh" d="m 35,3 0,2 2,0 0,-2 -2,0 z"/>
            <path data-state="me" d="m 36,1 0,2 2,0 0,-2 -2,0 z"/>
            <path data-state="hi" d="m 0,30 0,1 1,0 0,-1 -1,0 z m 1,1 0,1 1,0 0,-1 -1,0 z m 1,1 0,1 2,0 0,-1 -2,0 z"/>
            <path data-state="nd" d="m 9,15 0,1 3,0 0,-1 -3,0 z"/>
            <path data-state="id" d="m 4,15 0,2 2,0 0,-2 -2,0 z"/>
            <path data-state="ut" d="m 6,17 0,1 -1,0 0,3 1,0 0,-1 1,0 0,-3 -1,0 z"/>
            <path data-state="az" d="m 6,20 0,1 -1,0 0,2 1,0 0,1 2,0 0,-3 1,0 0,-1 -3,0 z"/>
            <path data-state="mt" d="m 6,15 0,1 3,0 0,-1 -3,0 z"/>
            <path data-state="wy" d="m 6,16 0,1 3,0 0,-1 -3,0 z"/>
            <path data-state="sd" d="m 9,16 0,1 3,0 0,-1 -3,0 z"/>
            <path data-state="ks" d="m 10,17 3,0 0,2 -3,0 z"/>
            <path data-state="ok" d="m 13,18 0,1 -3,0 0,1 2,0 0,1 2,0 0,-3 -1,0 z"/>
            <path data-state="tx" d="m 10,20 0,3 -2,0 0,1 1,0 0,2 1,0 0,-1 1,0 0,4 1,0 0,-1 2,0 0,-2 1,0 0,-1 1,0 0,-1 -1,0 0,-3 -3,0 0,-1 -2,0 z"/>
            <path data-state="ne" d="m 12,15 0,2 1,0 0,1 1,0 0,-3 -2,0 z"/>
            <path data-state="mo" d="m 14,15 0,4 3,0 0,-2 -1,0 0,-2 -2,0 z"/>
            <path data-state="ar" d="m 14,19 0,2 3,0 0,-2 -3,0 z"/>
            <path data-state="la" d="m 15,21 0,3 1,0 0,1 2,0 0,-2 -2,0 0,-1 1,0 0,-1 -2,0 z"/>
            <path data-state="ms" d="m 17,21 0,1 -1,0 0,1 2,0 0,1 1,0 0,-3 -2,0 z"/>
            <path data-state="tn" d="m 17,19 0,2 4,0 1,0 0,-1 1,0 0,-1 -6,0 z"/>
            <path data-state="al" d="m 19,21 0,3 3,0 0,-3 -3,0 z"/>
            <path data-state="ky" d="m 21,17 0,1 -3,0 0,1 6,0 0,-1 -1,0 0,-1 -2,0 z"/>
            <path data-state="in" d="m 20,12 0,1 -1,0 0,5 2,0 0,-6 -1,0 z"/>
            <path data-state="nc" d="m 22,20 0,1 3,0 0,1 3,0 0,1 1,0 0,-1 1,0 0,-1 1,0 0,-1 -9,0 z"/>
            <path data-state="ga" d="m 22,21 0,4 4,0 0,1 2,0 0,-1 -1,0 0,-1 -2,0 0,-3 -3,0 z"/>
            <path data-state="sc" d="m 25,22 0,2 2,0 0,1 2,0 0,-2 -1,0 0,-1 -3,0 z"/>
            <path data-state="wv" d="m 25,15 0,2 -1,0 0,1 2,0 0,-2 1,0 0,-1 -2,0 z"/>
            <path data-state="ak" d="m 0,6 0,2 2,0 0,-1 -1,0 0,-1 -1,0 z"/>
       </g>
       <g class="pie" transform="translate(33, 16) scale(7)">
         <circle class="pie" r="1"/>
         <path data-wonby="dem" />
         <path data-wonby="rep" transform="scale(-1,1)" />
         <line y1="1.2" />
       </g>
    </g>
</template>

<template id="packet">
    <circle class="packet" r="15"/>
</template>
<template id="firstPacket">
    <g class="packet">
        <circle r="15"/>
        <text y="3.5">{</text>
    </g>
</template>
<template id="lastPacket">
    <g class="packet">
        <circle r="15"/>
        <text y="3.5">}</text>
    </g>
</template>
<template id="getRequest">
    <g class="packet">
        <circle r="15"/>
        <text y="3.5" class="method">GET</text>
    </g>
</template>
<template id="airwavePacket">
    <g class="packetClip">
        <circle class="packet airwave" r="0"/>
    </g>
</template>
<template id="airwaveDone">
    <circle class="packet flash" r="8.5"/>
</template>
<template id="barrier">
    <g class="barrier">
        <path class="shadow" d="m 150,-110 -250,0 20,155 -60,60 330,0 -60,-60 z"/>
        <path class="wall" d="m -105,-124 0,169 25,0 0,-84 c 0,-35.9 47,-65 105,-65 58,0 105,29.1 105,65 l 0,84 25,0 0,-169 z"/>
        <clipPath id="downstream-clip">
            <path d="m 25,-104 c -58,0 -105,29.1 -105,65 l 0,84 -60,60 330,0 -60,-60 0,-84 c 0,-35.8 -47,-65 -105,-65 z"/>
        </clipPath>
        <clipPath id="upstream-clip">
            <path d="m -105,45 60,60 -435,0 0,-320 640,0 0,50 -265,41 z"/>
        </clipPath>
    </g>
</template>
</svg>


        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-47871814-1', 'oboejs.com');
            ga('send', 'pageview');
        </script>
    </body>
</html>
